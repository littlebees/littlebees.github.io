<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>net-faq | 記事本</title>
<meta name=keywords content="Network"><meta name=description content="動機"><meta name=author content="zhengcf"><link rel=canonical href=https://littlebees.github.io/2021/08/net-faq/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://littlebees.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://littlebees.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://littlebees.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://littlebees.github.io/apple-touch-icon.png><link rel=mask-icon href=https://littlebees.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="net-faq"><meta property="og:description" content="動機"><meta property="og:type" content="article"><meta property="og:url" content="https://littlebees.github.io/2021/08/net-faq/"><meta property="og:image" content="https://littlebees.github.io/images/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-29T02:41:08+00:00"><meta property="article:modified_time" content="2021-08-29T02:41:08+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://littlebees.github.io/images/papermod-cover.png"><meta name=twitter:title content="net-faq"><meta name=twitter:description content="動機"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://littlebees.github.io/posts/"},{"@type":"ListItem","position":2,"name":"net-faq","item":"https://littlebees.github.io/2021/08/net-faq/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"net-faq","name":"net-faq","description":"動機","keywords":["Network"],"articleBody":"動機 OSI 7 layers HTTP keep-alive: 當客戶端傳送另一個請求時，它會使用同一個連接 Idempotence: 只有POST不是Idempotence POST可以看成create資源 DNS string 2 IP iterative \u0026 recursive DHCP DHCP Discover DHCP Offer DHCP Request DHCP ACK transport for application TCP (data header) sport, dport seq, ack connection oriented flow control receive window ack, ack, … , seq,seq … sending window seq, seq, …, wait, wait, … wait, … (not in window) 每個出去的pkt會有timer timeout會retransmit 控制sending window的長度就是flow control receiver會通知rwnd的大小 error control checksum ack 下一個要的seq 確認號 為 所收到區段的 最後一個 位元組之 序號 + 1 Delayed ACK 累積多一點ack retransmit delay, lost, damaged pkt fast retransmit receiver: out-of-order pkt sender: 收到3個重複的ack 不等timer直接retransmit congestion control Loss-based 如果retransmit發生就調cwnd bufferbloat 大家的buffer都很大 pkt都待在queue tcp以為沒有congestion 狂丟pkt到網路上 sending window = min(RCV.rwnd, cwnd) cwnd怎麼長 slow start 指數成長 總不能一直漲 Slow Start Threshold packet loss Congestion Avoidance 線性的長 Fast Recovery fast retransmit後到這個狀態 等看是retransmit還是packet loss split packet UDP IP for WAN (data header) IP header不會變!! match 中 直接過去 沒中 default gateway how to match CIDR、netmask (IP_A \u0026 netmask) == (IP_B \u0026 netmask) net addr \u0026 host addr table from RIP broacast routing table for 30 secs use metrics to decide to use which ip as dest IP 2 MAC \u0026 MAC 2 IP ARP ARP spoofing RARP data link for LAN ethernet (FCS data header) CSMA/CD 傳送特殊阻塞資訊並立即停止傳送資料 固定時間（一開始是1 contention period times）內等待隨機的時間，再次傳送 若依舊碰撞，則採用截斷二進位指數避退演算法進行傳送。即十次之內停止前一次「固定時間」的兩倍時間內隨機再發送 phy cable VPN tunnel tunnels are a method for transporting data across a network using protocols that are not supported by that network. Tunneling works by encapsulating packets: wrapping packets inside of other packets. IPsec level 3 2個東西 SA IPsec的參數 封包模式 transport 用原本的header，加入驗證的資料 tunnel 造一個新的header 安全協定 AH 驗證header有沒有被改 host 2 host ESP 把原pkt加密，再封裝 所以可以過NAT network 2 network 加密演算法 PKI 公私鑰 驗證身分用 The purpose of IPsec is to give the remote computer direct access to the central network, making it a full member TLS level 4 建連線時交換加密法與憑證，生成加密連線 Security is maintained by restricting access to only what’s needed. portal mode can only be used for web-based programs tunnel mode users can access any applications on the network, including ones that are not web based scenario: Ping 如果是string會先過DNS換ip 生ICMP echo 建連線，udp socket 填sport與dport，包udp header 填sip與dip，包ip header dip放到routing table比，看要往哪一台機器丟 找到dest，用arp換mac 填smac與dmac，包eth header 往下，到phy router解eth header，確認是自己要收，驗FCS router看ip header，對table，arp，包eth header 終點就是反著做一次 scenario: Browser 差在tcp tcp start 3 handshake SYN -\u003e ACK與SYN \u003c- ACK -\u003e slow start \u0026 rwnd… tcp end 4 close FIN -\u003e FIN_WAIT, CLOSE_WAIT ACK \u003c- FIN_WAIT, CLOSE_WAIT FIN \u003c- TIME_WAIT, LAST_ACK ACK -\u003e (wait a while) CLOSED, CLOSED explain DDoS 目的 利用大量的互聯網流量使目標伺服器或其周圍的基礎設施不堪重負，從而阻斷目標伺服器、服務或網路的正常流量 跡象 大量流量 from 同一ip, 同一ip範圍 單一行為特徵（例如設備類型、地理位置或 Web 瀏覽器版本）的用戶 對單一頁面或端點的請求 奇怪的流量模式，如在非正常時段激增，或不自然的模式 攻擊方式 level 7 HTTP 洪水: req同一個網頁 DNS放大: 假的sip去dns query level 4 SYN 洪水: 假的sip去建連線 level 3 ping of death 在當時，大部分電腦無法處理大於IPv4最大封包大小（65,535位元組）的ping封包。 因此發送這樣大小的ping可以令目標電腦崩潰。 buffer overflow 防禦手法 黑洞路由 Rate Limiting Web Application Firewall 反向 Proxy，可使客戶在到達伺服器前通過 WAF load balance 自動分配新進來的請求要導到哪一台 Server level 3 分散到各個主機 ECMP level 7 application load balancer (from aws) 分散到group persistence 依據session打散到server affinity 如果把seesion共用，就能 依據busy程度分配load logic trick?? 邏輯問題 找不同重量的球\n8顆球，其中1顆撞球比其他顆重了一點，幾次能找到 兩次 先將所有的撞球平分成三坨：3、3、2 先比3,3，後面就很好想了 一個5公升和3公升的瓶子，請量出4公升的水量\n5 -\u003e 3 5 剩下 2 5(2) -\u003e 3 3 剩下 1的空間 5 -\u003e 3(2) 最後是4 醫生給了患者4顆共2種的藥，但他們彼此從外觀並不能分出差別，早上和晚上都得兩種各服一顆\n如果他沒按時吃或吃錯的話就會死，結果他不小心把藥搞混了，那他該怎麼做才能分辨哪個是正確的 那就是把藥全部都切成一半，但是這一半不能再混在一起，早上把其中一半吃掉，晚上再吃另一半就好 桌子的抽屜裏有如下16張撲克牌:\n紅心 A、Q、4 黑桃 J、8、4、2、7、3 梅花 K、Q、5、4、6 方塊 A、5 把這張牌的點數告訴P先生，把這張牌的花色告訴Q先生 P先生：“我不知道這張牌。” 數字重複: A、Q、4、5 Q先生：“我知道你不知道這張牌。” 花色中的數字都是重複的: 紅心、方塊 P先生：“現在我知道這張牌了。” 數字唯一: 方塊5 Q先生：“我也知道了。 花色中的數字唯一: 方塊5 DS implementation circular queue class CircularQueue(): def __init__(self, size): # initializing the class self.size = size self.queue = [None for i in range(size)] self.front = self.rear = -1 def enqueue(self, data): if ((self.rear + 1) % self.size == self.front): print(\" Queue is Full\\n\") # condition for empty queue elif (self.front == -1): self.front = 0 self.rear = 0 self.queue[self.rear] = data else: self.rear = (self.rear + 1) % self.size self.queue[self.rear] = data def dequeue(self): if (self.front == -1): # condition for empty queue print (\"Queue is Empty\\n\") # condition for only one element elif (self.front == self.rear): temp=self.queue[self.front] self.front = -1 self.rear = -1 return temp else: temp = self.queue[self.front] self.front = (self.front + 1) % self.size return temp stack in linked list push/pop在head def push(head,val): ret = Node(val) ret.next = head return ret def pop(head): if head: return [head.val, head.next] else: raise StopIteration LC remove duplicate from the linked list validate binary search tree top k frequen elements reverse linked list cross byte matching 的 pattern search byte: kmp bit: bitmask mutil core process!! atomic cache coherency ","wordCount":"687","inLanguage":"en","datePublished":"2021-08-29T02:41:08Z","dateModified":"2021-08-29T02:41:08Z","author":{"@type":"Person","name":"zhengcf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://littlebees.github.io/2021/08/net-faq/"},"publisher":{"@type":"Organization","name":"記事本","logo":{"@type":"ImageObject","url":"https://littlebees.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://littlebees.github.io/ accesskey=h title="記事本 (Alt + H)">記事本</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://littlebees.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://littlebees.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://littlebees.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://littlebees.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://littlebees.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">net-faq</h1><div class=post-meta><span title='2021-08-29 02:41:08 +0000 UTC'>August 29, 2021</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;zhengcf</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%8b%95%e6%a9%9f aria-label=動機>動機</a></li><li><a href=#osi-7-layers aria-label="OSI 7 layers">OSI 7 layers</a></li><li><a href=#vpn aria-label=VPN>VPN</a></li><li><a href=#scenario-ping aria-label="scenario: Ping">scenario: Ping</a></li><li><a href=#scenario-browser aria-label="scenario: Browser">scenario: Browser</a></li><li><a href=#explain aria-label=explain>explain</a></li><li><a href=#logic-trick-%e9%82%8f%e8%bc%af%e5%95%8f%e9%a1%8c aria-label="logic trick?? 邏輯問題">logic trick?? 邏輯問題</a></li><li><a href=#ds-implementation aria-label="DS implementation">DS implementation</a></li><li><a href=#lc aria-label=LC>LC</a></li><li><a href=#mutil-core-process aria-label="mutil core process!!">mutil core process!!</a></li></ul></div></details></div><div class=post-content><h2 id=動機>動機<a hidden class=anchor aria-hidden=true href=#動機>#</a></h2><h2 id=osi-7-layers>OSI 7 layers<a hidden class=anchor aria-hidden=true href=#osi-7-layers>#</a></h2><ul><li>HTTP<ul><li>keep-alive: 當客戶端傳送另一個請求時，它會使用同一個連接</li><li>Idempotence: 只有POST不是Idempotence<ul><li>POST可以看成create資源</li></ul></li></ul></li><li>DNS<ul><li>string 2 IP</li><li>iterative & recursive</li></ul></li><li>DHCP<ul><li>DHCP Discover</li><li>DHCP Offer</li><li>DHCP Request</li><li>DHCP ACK</li></ul></li><li>transport<ul><li>for application</li><li>TCP<ul><li><code>(data header)</code><ul><li>sport, dport</li><li>seq, ack</li></ul></li><li>connection oriented<ul><li>flow control<ul><li>receive window<ul><li>ack, ack, &mldr; , seq,seq &mldr;</li></ul></li><li>sending window<ul><li>seq, seq, &mldr;, wait, wait, &mldr;<ul><li>wait, &mldr; (not in window)</li></ul></li><li>每個出去的pkt會有timer<ul><li>timeout會retransmit</li></ul></li><li>控制sending window的長度就是flow control</li><li>receiver會通知rwnd的大小</li></ul></li></ul></li><li>error control<ul><li>checksum</li><li>ack<ul><li>下一個要的seq</li><li>確認號 為 所收到區段的 最後一個 位元組之 序號 + 1</li><li>Delayed ACK<ul><li>累積多一點ack</li></ul></li></ul></li><li>retransmit<ul><li>delay, lost, damaged pkt</li></ul></li><li>fast retransmit<ul><li>receiver: out-of-order pkt</li><li>sender: 收到3個重複的ack</li><li>不等timer直接retransmit</li></ul></li></ul></li><li>congestion control<ul><li>Loss-based<ul><li>如果retransmit發生就調cwnd</li><li>bufferbloat<ul><li>大家的buffer都很大</li><li>pkt都待在queue</li><li>tcp以為沒有congestion</li><li>狂丟pkt到網路上</li></ul></li></ul></li><li><code>sending window = min(RCV.rwnd, cwnd)</code><ul><li>cwnd怎麼長<ul><li>slow start<ul><li>指數成長</li><li>總不能一直漲<ul><li>Slow Start Threshold</li><li>packet loss</li></ul></li></ul></li><li>Congestion Avoidance<ul><li>線性的長</li></ul></li><li>Fast Recovery<ul><li>fast retransmit後到這個狀態</li><li>等看是retransmit還是packet loss
<img loading=lazy src=https://www.researchgate.net/profile/Ljiljana-Trajkovic/publication/228825379/figure/fig2/AS:667613487198225@1536182867384/TCP-congestion-control-algorithms-The-congestion-window-size-depends-on-the-congestion.png alt></li></ul></li></ul></li></ul></li></ul></li></ul></li><li>split packet</li></ul></li><li>UDP</li></ul></li><li>IP<ul><li>for WAN</li><li><code>(data header)</code></li><li>IP header不會變!!<ul><li>match<ul><li>中<ul><li>直接過去</li></ul></li><li>沒中<ul><li>default gateway</li></ul></li><li>how to match<ul><li>CIDR、netmask<ul><li><code>(IP_A & netmask) == (IP_B & netmask)</code></li><li>net addr & host addr</li></ul></li><li>table from<ul><li>RIP<ul><li>broacast routing table for 30 secs</li><li>use metrics to decide to use which ip as dest</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li>IP 2 MAC & MAC 2 IP<ul><li>ARP<ul><li>ARP spoofing</li></ul></li><li>RARP</li></ul></li><li>data link<ul><li>for LAN</li><li>ethernet<ul><li><code>(FCS data header)</code></li><li>CSMA/CD<ul><li>傳送特殊阻塞資訊並立即停止傳送資料</li><li>固定時間（一開始是1 contention period times）內等待隨機的時間，再次傳送</li><li>若依舊碰撞，則採用截斷二進位指數避退演算法進行傳送。即十次之內停止前一次「固定時間」的兩倍時間內隨機再發送</li></ul></li></ul></li></ul></li><li>phy<ul><li>cable</li></ul></li></ul><h2 id=vpn>VPN<a hidden class=anchor aria-hidden=true href=#vpn>#</a></h2><ul><li>tunnel<ul><li>tunnels are a method for transporting data across a network using protocols that are not supported by that network.</li><li>Tunneling works by encapsulating packets: wrapping packets inside of other packets.</li></ul></li><li>IPsec<ul><li>level 3</li><li>2個東西<ul><li>SA<ul><li>IPsec的參數<ul><li>封包模式<ul><li>transport<ul><li>用原本的header，加入驗證的資料</li></ul></li><li>tunnel<ul><li>造一個新的header</li></ul></li></ul></li><li>安全協定<ul><li>AH<ul><li>驗證header有沒有被改</li><li>host 2 host</li></ul></li><li>ESP<ul><li>把原pkt加密，再封裝</li><li>所以可以過NAT</li><li>network 2 network</li></ul></li></ul></li><li>加密演算法</li></ul></li></ul></li><li>PKI<ul><li>公私鑰</li><li>驗證身分用</li></ul></li></ul></li><li>The purpose of IPsec is to give the remote computer direct access to the central network, making it a full member</li></ul></li><li>TLS<ul><li>level 4</li><li>建連線時交換加密法與憑證，生成加密連線</li><li>Security is maintained by restricting access to only what’s needed.</li><li>portal mode<ul><li>can only be used for web-based programs</li></ul></li><li>tunnel mode<ul><li>users can access any applications on the network, including ones that are not web based</li></ul></li></ul></li></ul><h2 id=scenario-ping>scenario: Ping<a hidden class=anchor aria-hidden=true href=#scenario-ping>#</a></h2><ul><li>如果是string會先過DNS換ip</li><li>生ICMP echo</li><li>建連線，udp socket</li><li>填sport與dport，包udp header</li><li>填sip與dip，包ip header</li><li>dip放到routing table比，看要往哪一台機器丟</li><li>找到dest，用arp換mac</li><li>填smac與dmac，包eth header</li><li>往下，到phy</li><li>router解eth header，確認是自己要收，驗FCS</li><li>router看ip header，對table，arp，包eth header</li><li>終點就是反著做一次</li></ul><h2 id=scenario-browser>scenario: Browser<a hidden class=anchor aria-hidden=true href=#scenario-browser>#</a></h2><ul><li>差在tcp</li><li>tcp start<ul><li>3 handshake<ul><li>SYN <code>-></code></li><li>ACK與SYN <code>&lt;-</code></li><li>ACK <code>-></code></li></ul></li><li>slow start & rwnd&mldr;
<img loading=lazy src=https://2.bp.blogspot.com/-2mx35jqEZGM/Wa5u2IscCeI/AAAAAAAAcuM/EffX5Qq_ByE0RU6C5OYNfIfD8UX5iO1fwCHMYCw/s780/tcp-open-state-flow.png alt></li></ul></li><li>tcp end<ul><li>4 close<ul><li>FIN <code>-></code><ul><li>FIN_WAIT, CLOSE_WAIT</li></ul></li><li>ACK <code>&lt;-</code><ul><li>FIN_WAIT, CLOSE_WAIT</li></ul></li><li>FIN <code>&lt;-</code><ul><li>TIME_WAIT, LAST_ACK</li></ul></li><li>ACK <code>-></code><ul><li>(wait a while) CLOSED, CLOSED
<img loading=lazy src=https://2.bp.blogspot.com/-EVTQe_4Vk00/Wa5u2iHmHQI/AAAAAAAAcuY/LnHrPzqczAQMs_dRnwzCuI_aQGyID_MMQCHMYCw/s780/tcp-close-state-flow.png alt></li></ul></li></ul></li></ul></li></ul><h2 id=explain>explain<a hidden class=anchor aria-hidden=true href=#explain>#</a></h2><ul><li>DDoS<ul><li>目的<ul><li>利用大量的互聯網流量使目標伺服器或其周圍的基礎設施不堪重負，從而阻斷目標伺服器、服務或網路的正常流量</li></ul></li><li>跡象<ul><li>大量流量 from<ul><li>同一ip, 同一ip範圍</li><li>單一行為特徵（例如設備類型、地理位置或 Web 瀏覽器版本）的用戶</li><li>對單一頁面或端點的請求</li><li>奇怪的流量模式，如在非正常時段激增，或不自然的模式</li></ul></li></ul></li><li>攻擊方式<ul><li>level 7<ul><li>HTTP 洪水: req同一個網頁</li><li>DNS放大: 假的sip去dns query</li></ul></li><li>level 4<ul><li>SYN 洪水: 假的sip去建連線</li></ul></li><li>level 3<ul><li>ping of death<ul><li>在當時，大部分電腦無法處理大於IPv4最大封包大小（65,535位元組）的ping封包。</li><li>因此發送這樣大小的ping可以令目標電腦崩潰。</li><li>buffer overflow</li></ul></li></ul></li></ul></li><li>防禦手法<ul><li>黑洞路由</li><li>Rate Limiting</li><li>Web Application Firewall<ul><li>反向 Proxy，可使客戶在到達伺服器前通過 WAF</li></ul></li></ul></li></ul></li><li>load balance<ul><li>自動分配新進來的請求要導到哪一台 Server<ul><li>level 3<ul><li>分散到各個主機</li><li>ECMP</li></ul></li><li>level 7<ul><li>application load balancer (from aws)<ul><li>分散到group</li></ul></li><li>persistence<ul><li>依據session打散到server</li></ul></li><li>affinity<ul><li>如果把seesion共用，就能<ul><li>依據busy程度分配load</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><h2 id=logic-trick-邏輯問題>logic trick?? 邏輯問題<a hidden class=anchor aria-hidden=true href=#logic-trick-邏輯問題>#</a></h2><ul><li><p>找不同重量的球</p><ul><li>8顆球，其中1顆撞球比其他顆重了一點，幾次能找到</li><li>兩次<ul><li>先將所有的撞球平分成三坨：3、3、2</li><li>先比3,3，後面就很好想了</li></ul></li></ul></li><li><p>一個5公升和3公升的瓶子，請量出4公升的水量</p><ul><li>5 -> 3<ul><li>5 剩下 2</li></ul></li><li>5(2) -> 3<ul><li>3 剩下 1的空間</li></ul></li><li>5 -> 3(2)</li><li>最後是4</li></ul></li><li><p>醫生給了患者4顆共2種的藥，但他們彼此從外觀並不能分出差別，早上和晚上都得兩種各服一顆</p><ul><li>如果他沒按時吃或吃錯的話就會死，結果他不小心把藥搞混了，那他該怎麼做才能分辨哪個是正確的</li><li>那就是把藥全部都切成一半，但是這一半不能再混在一起，早上把其中一半吃掉，晚上再吃另一半就好</li></ul></li><li><p>桌子的抽屜裏有如下16張撲克牌:</p><ul><li>紅心 A、Q、4</li><li>黑桃 J、8、4、2、7、3</li><li>梅花 K、Q、5、4、6</li><li>方塊 A、5</li><li>把這張牌的點數告訴P先生，把這張牌的花色告訴Q先生<ul><li>P先生：&ldquo;我不知道這張牌。&rdquo;<ul><li>數字重複: A、Q、4、5</li></ul></li><li>Q先生：&ldquo;我知道你不知道這張牌。&rdquo;<ul><li>花色中的數字都是重複的: 紅心、方塊</li></ul></li><li>P先生：&ldquo;現在我知道這張牌了。&rdquo;<ul><li>數字唯一: 方塊5</li></ul></li><li>Q先生：&ldquo;我也知道了。<ul><li>花色中的數字唯一: 方塊5</li></ul></li></ul></li></ul></li></ul><h2 id=ds-implementation>DS implementation<a hidden class=anchor aria-hidden=true href=#ds-implementation>#</a></h2><ul><li>circular queue</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>CircularQueue</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>size</span><span class=p>):</span> <span class=c1># initializing the class</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>size</span> <span class=o>=</span> <span class=n>size</span>
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>queue</span> <span class=o>=</span> <span class=p>[</span><span class=kc>None</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>size</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>front</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>rear</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>enqueue</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>((</span><span class=bp>self</span><span class=o>.</span><span class=n>rear</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>size</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>front</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34; Queue is Full</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>             
</span></span><span class=line><span class=cl>        <span class=c1># condition for empty queue</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>front</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>front</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>rear</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>rear</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>rear</span> <span class=o>=</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>rear</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>size</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>rear</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>             
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>dequeue</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>front</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>):</span> <span class=c1># condition for empty queue</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span> <span class=p>(</span><span class=s2>&#34;Queue is Empty</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>             
</span></span><span class=line><span class=cl>        <span class=c1># condition for only one element</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>front</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>rear</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>temp</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>front</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>front</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>rear</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>temp</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>temp</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>front</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>front</span> <span class=o>=</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>front</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>size</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>temp</span>
</span></span></code></pre></div><ul><li>stack in linked list<ul><li>push/pop在head</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>push</span><span class=p>(</span><span class=n>head</span><span class=p>,</span><span class=n>val</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=n>ret</span> <span class=o>=</span> <span class=n>Node</span><span class=p>(</span><span class=n>val</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>ret</span><span class=o>.</span><span class=n>next</span> <span class=o>=</span> <span class=n>head</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>ret</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>pop</span><span class=p>(</span><span class=n>head</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=n>head</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=n>head</span><span class=o>.</span><span class=n>val</span><span class=p>,</span> <span class=n>head</span><span class=o>.</span><span class=n>next</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>raise</span> <span class=ne>StopIteration</span>
</span></span></code></pre></div><h2 id=lc>LC<a hidden class=anchor aria-hidden=true href=#lc>#</a></h2><ul><li>remove duplicate from the linked list</li><li>validate binary search tree</li><li>top k frequen elements</li><li>reverse linked list</li><li>cross byte matching 的 pattern search<ul><li>byte: kmp</li><li>bit: bitmask</li></ul></li></ul><h2 id=mutil-core-process>mutil core process!!<a hidden class=anchor aria-hidden=true href=#mutil-core-process>#</a></h2><ul><li>atomic</li><li>cache coherency</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://littlebees.github.io/tags/network/>Network</a></li></ul><nav class=paginav><a class=prev href=https://littlebees.github.io/2021/08/leetcode-521-longest-uncommon-subsequence-i/><span class=title>« Prev</span><br><span>leetcode-521 - Longest Uncommon Subsequence I</span>
</a><a class=next href=https://littlebees.github.io/2021/08/leetcode-1448-count-good-nodes-in-binary-tree/><span class=title>Next »</span><br><span>leetcode-1448 - Count Good Nodes in Binary Tree</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://littlebees.github.io/>記事本</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>