<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>leetcode-87 - Scramble String | 記事本</title>
<meta name=keywords content="Dynamic Programming,String"><meta name=description content="動機
不同的DP不同的難易度"><meta name=author content="zhengcf"><link rel=canonical href=https://littlebees.github.io/2021/07/leetcode-87-scramble-string/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://littlebees.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://littlebees.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://littlebees.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://littlebees.github.io/apple-touch-icon.png><link rel=mask-icon href=https://littlebees.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://littlebees.github.io/2021/07/leetcode-87-scramble-string/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="leetcode-87 - Scramble String"><meta property="og:description" content="動機
不同的DP不同的難易度"><meta property="og:type" content="article"><meta property="og:url" content="https://littlebees.github.io/2021/07/leetcode-87-scramble-string/"><meta property="og:image" content="https://littlebees.github.io/images/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-25T16:10:09+00:00"><meta property="article:modified_time" content="2021-07-25T16:10:09+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://littlebees.github.io/images/papermod-cover.png"><meta name=twitter:title content="leetcode-87 - Scramble String"><meta name=twitter:description content="動機
不同的DP不同的難易度"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://littlebees.github.io/posts/"},{"@type":"ListItem","position":2,"name":"leetcode-87 - Scramble String","item":"https://littlebees.github.io/2021/07/leetcode-87-scramble-string/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"leetcode-87 - Scramble String","name":"leetcode-87 - Scramble String","description":"動機 不同的DP不同的難易度\n","keywords":["Dynamic Programming","String"],"articleBody":"動機 不同的DP不同的難易度\nProblem We can scramble a string s to get a string t using the following algorithm:\nIf the length of the string is 1, stop.If the length of the string is \u003e 1, do the following:Split the string into two non-empty substrings at a random index, i.e., if the string is s, divide it to x and y where s = x + y.Randomly decide to swap the two substrings or to keep them in the same order. i.e., after this step, s may become s = x + y or s = y + x.Apply step 1 recursively on each of the two substrings x and y.Given two strings s1 and s2 of the same length, return true if s2 is a scrambled string of s1, otherwise, return false.\nExample 1:\nInput: s1 = great, s2 = rgeatOutput: trueExplanation: One possible scenario applied on s1 is:great --\u003e gr/eat // divide at random index.gr/eat --\u003e gr/eat // random decision is not to swap the two substrings and keep them in order.gr/eat --\u003e g/r / e/at // apply the same algorithm recursively on both substrings. divide at ranom index each of them.g/r / e/at --\u003e r/g / e/at // random decision was to swap the first substring and to keep the second substring in the same order.r/g / e/at --\u003e r/g / e/ a/t // again apply the algorithm recursively, divide at to a/t.r/g / e/ a/t --\u003e r/g / e/ a/t // random decision is to keep both substrings in the same order.The algorithm stops now and the result string is rgeat which is s2.As there is one possible scenario that led s1 to be scrambled to s2, we return true.Example 2:\nInput: s1 = abcde, s2 = caebdOutput: falseExample 3:\nInput: s1 = a, s2 = aOutput: true Constraints:\ns1.length == s2.length1 \u003c= s1.length \u003c= 30s1 and s2 consist of lower-case English letters. Ver1:WA def allOcuurLenFromEnd(s,c,i,j): #print('find',c,i,j) ans = [] while i \u003c j: i = s.find(c,i,j+1) if i != -1: ans.append(j-i+1) i += 1 else: break return ans dp = {} def f(s1,s2,i,j,l): #print(i,j,l) if (i,j,l) not in dp: if l is 0: dp[(i,j,l)] = True elif l is 1: dp[(i,j,l)] = s1[i] == s2[j] else: if s1[i] == s2[j]: dp[(i,j,l)] = f(s1,s2,i-1,j-1,l-1) else: ii = allOcuurLenFromEnd(s2,s1[i],j+1-l,j) #print(ii) for x in ii: ret = f(s1,s2,i-x,j-x,l-x) and f(s1,s2,i-1,j,x-1) #print(\"ret\",ret,(i-x,j-x,l-x),(i-1,j,x-1)) if ret: dp[(i,j,l)] = ret return ret dp[(i,j,l)] = False #print((i,j,l),dp[(i,j,l)]) return dp[(i,j,l)] class Solution: def isScramble(self, s1: str, s2: str) -\u003e bool: dp.clear() return f(s1,s2,len(s1)-1,len(s2)-1,len(s1)) Ver2: WA def allOcuurLenFromEnd(s,c,i,j): #print('find',c,i,j) ans = [] while i \u003c j: i = s.find(c,i,j+1) if i != -1: ans.append(j-i+1) i += 1 else: break return ans def getll(s1,s2,i,j,limit): ll = 0 while 0 \u003c= i and 0 \u003c= j and s1[i] == s2[j] and limit \u003e 0: ll += 1 i -= 1 j -= 1 limit -= 1 return ll dp = {} def f(s1,s2,i,j,l): print(i,j,l) if (i,j,l) not in dp: if l is 0: dp[(i,j,l)] = True elif l is 1: dp[(i,j,l)] = s1[i] == s2[j] else: if s1[i] == s2[j]: dp[(i,j,l)] = f(s1,s2,i-1,j-1,l-1) else: s2_start_index = j+1-l s2_end_index = j lens = allOcuurLenFromEnd(s2,s1[i],s2_start_index,s2_end_index) print(\"lens\",lens) for x in lens: occur_in_s2 = j-x+1 pos_to_find_ll_in_s2_from = occur_in_s2-1 pos_to_find_ll_in_s1_from = i-1 ll = getll(s1,s2,pos_to_find_ll_in_s1_from,pos_to_find_ll_in_s2_from,l-1) lhs_len = l-x-ll print(\"ll\",ll) lhs_s1_end = i-x-ll lhs_s2_end = j-x-ll rhs_len = x - 1 rhs_s1_end = i-1-ll rhs_s2_end = j ret = f(s1,s2,lhs_s1_end,lhs_s2_end,lhs_len) and f(s1,s2,rhs_s1_end,rhs_s2_end,rhs_len) print(\"ret\",ret,(i-x,j-x,l-x),(i-1,j,x-1)) if ret: dp[(i,j,l)] = ret return ret dp[(i,j,l)] = False print((i,j,l),dp[(i,j,l)]) return dp[(i,j,l)] class Solution: def isScramble(self, s1: str, s2: str) -\u003e bool: dp.clear() return f(s1,s2,len(s1)-1,len(s2)-1,len(s1)) Ver2: AC case 有點多\n交叉 直的 前或後有一樣的字 class Solution: def isScramble(self, s1: str, s2: str) -\u003e bool: dp = {} if len(s1) != len(s2): return False #s1, s2 = removePrefix_postfix(s1,s2) #if not s1 and not s2: # return True for i in range(0,len(s1)): for j in range(0,len(s1)): dp[(i,j,1)] = s1[i] == s2[j] for l in range(2,len(s1)+1): for i in range(0,len(s1)): for j in range(0,len(s1)): if i-l \u003c 0 or j-l \u003c 0: dp[(i,j,l)] = False for l in range(2,len(s1)+1): for x in range(1,l): for i in range(1,len(s1)): if i-x \u003e= 0: for j in range(1,len(s1)): if j-(l-x) \u003e= 0: if (i,j,l) not in dp: dp[(i,j,l)] = False dp[(i,j,l)] = dp[(i,j,l)] or (i-l+1,j-l+1,1) in dp and dp[(i-l+1,j-l+1,1)] and dp[(i,j,l-1)] dp[(i,j,l)] = dp[(i,j,l)] or (dp[(i,j-(l-x),x)] and dp[(i-x,j,l-x)]) or (dp[(i,j,1)] and dp[(i-1,j-1,l-1)]) or (i-(l-x) \u003e= 0 and j-(l-x) \u003e= 0 and dp[(i,j,(l-x))] and dp[(i-(l-x),j-(l-x),x)]) #print((i,j,l),dp[(i,j,l)],(i,j-(l-x),x), dp[(i,j-(l-x),x)] ,(i-x,j,l-x), dp[(i-x,j,l-x)]) return dp[(len(s1)-1,len(s2)-1,len(s1))] Sol 照題目走\ndef cache_computing(f,is_computing=False): mem = {} @functools.wraps(f) def wrapper(*args,**kwds): if args not in mem: mem[args] = is_computing mem[args] = f(*args,**kwds) return mem[args] return wrapper class Solution: @cache_computing def isScramble(self, s1: str, s2: str) -\u003e bool: #print(s1,s2) if not s1 and not s2: return True elif s1[0] == s2[0]: return self.isScramble(s1[1:],s2[1:]) elif len(s1) == 1: return False else: return any([(self.isScramble(s1[k:],s2[k:]) and self.isScramble(s1[:k],s2[:k])) or (self.isScramble(s1[k:],s2[:len(s2)-k]) and self.isScramble(s1[:k],s2[len(s2)-k:])) for k in range(1,len(s1))]) ","wordCount":"812","inLanguage":"en","image":"https://littlebees.github.io/images/papermod-cover.png","datePublished":"2021-07-25T16:10:09Z","dateModified":"2021-07-25T16:10:09Z","author":{"@type":"Person","name":"zhengcf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://littlebees.github.io/2021/07/leetcode-87-scramble-string/"},"publisher":{"@type":"Organization","name":"記事本","logo":{"@type":"ImageObject","url":"https://littlebees.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://littlebees.github.io/ accesskey=h title="記事本 (Alt + H)">記事本</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://littlebees.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://littlebees.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://littlebees.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://littlebees.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://littlebees.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">leetcode-87 - Scramble String</h1><div class=post-meta><span title='2021-07-25 16:10:09 +0000 UTC'>July 25, 2021</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;zhengcf</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%8b%95%e6%a9%9f aria-label=動機>動機</a></li><li><a href=#problem aria-label=Problem>Problem</a></li><li><a href=#ver1wa aria-label=Ver1:WA>Ver1:WA</a></li><li><a href=#ver2-wa aria-label="Ver2: WA">Ver2: WA</a></li><li><a href=#ver2-ac aria-label="Ver2: AC">Ver2: AC</a></li><li><a href=#sol aria-label=Sol>Sol</a></li></ul></div></details></div><div class=post-content><h2 id=動機>動機<a hidden class=anchor aria-hidden=true href=#動機>#</a></h2><p>不同的DP不同的難易度</p><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>#</a></h2><p>We can scramble a string s to get a string t using the following algorithm:</p><ol><li>If the length of the string is 1, stop.</li><li>If the length of the string is > 1, do the following:<ul><li>Split the string into two non-empty substrings at a random index, i.e., if the string is <code>s</code>, divide it to <code>x</code> and <code>y</code> where <code>s = x + y</code>.</li><li><strong>Randomly</strong> decide to swap the two substrings or to keep them in the same order. i.e., after this step, <code>s</code> may become <code>s = x + y</code> or <code>s = y + x</code>.</li><li>Apply step 1 recursively on each of the two substrings <code>x</code> and <code>y</code>.</li></ul></li></ol><p>Given two strings <code>s1</code> and <code>s2</code> of <strong>the same length</strong>, return <code>true</code> if <code>s2</code> is a scrambled string of <code>s1</code>, otherwise, return <code>false</code>.</p><p> </p><p><strong>Example 1:</strong></p><pre><strong>Input:</strong> s1 = great, s2 = rgeat<strong>Output:</strong> true<strong>Explanation:</strong> One possible scenario applied on s1 is:great --> gr/eat // divide at random index.gr/eat --> gr/eat // random decision is not to swap the two substrings and keep them in order.gr/eat --> g/r / e/at // apply the same algorithm recursively on both substrings. divide at ranom index each of them.g/r / e/at --> r/g / e/at // random decision was to swap the first substring and to keep the second substring in the same order.r/g / e/at --> r/g / e/ a/t // again apply the algorithm recursively, divide at to a/t.r/g / e/ a/t --> r/g / e/ a/t // random decision is to keep both substrings in the same order.The algorithm stops now and the result string is rgeat which is s2.As there is one possible scenario that led s1 to be scrambled to s2, we return true.</pre><p><strong>Example 2:</strong></p><pre><strong>Input:</strong> s1 = abcde, s2 = caebd<strong>Output:</strong> false</pre><p><strong>Example 3:</strong></p><pre><strong>Input:</strong> s1 = a, s2 = a<strong>Output:</strong> true</pre><p> </p><p><strong>Constraints:</strong></p><ul><li><code>s1.length == s2.length</code></li><li><code>1 <= s1.length <= 30</code></li><li><code>s1</code> and <code>s2</code> consist of lower-case English letters.</li></ul><h2 id=ver1wa>Ver1:WA<a hidden class=anchor aria-hidden=true href=#ver1wa>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>allOcuurLenFromEnd</span><span class=p>(</span><span class=n>s</span><span class=p>,</span><span class=n>c</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>#print(&#39;find&#39;,c,i,j)</span>
</span></span><span class=line><span class=cl>    <span class=n>ans</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>j</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=n>c</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>i</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>ans</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>j</span><span class=o>-</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>i</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>ans</span>
</span></span><span class=line><span class=cl><span class=n>dp</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>#print(i,j,l)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>dp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>l</span> <span class=ow>is</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>l</span> <span class=ow>is</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s2</span><span class=p>[</span><span class=n>j</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s2</span><span class=p>[</span><span class=n>j</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=n>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>l</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>ii</span> <span class=o>=</span> <span class=n>allOcuurLenFromEnd</span><span class=p>(</span><span class=n>s2</span><span class=p>,</span><span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>],</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=o>-</span><span class=n>l</span><span class=p>,</span><span class=n>j</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=c1>#print(ii)</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>ii</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>ret</span> <span class=o>=</span> <span class=n>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>i</span><span class=o>-</span><span class=n>x</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=n>x</span><span class=p>,</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>)</span> <span class=ow>and</span> <span class=n>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>x</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=c1>#print(&#34;ret&#34;,ret,(i-x,j-x,l-x),(i-1,j,x-1))</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>ret</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=n>ret</span>
</span></span><span class=line><span class=cl>                        <span class=k>return</span> <span class=n>ret</span>
</span></span><span class=line><span class=cl>                <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=c1>#print((i,j,l),dp[(i,j,l)])</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>isScramble</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>s1</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>s2</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>dp</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s2</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>))</span>
</span></span></code></pre></div><h2 id=ver2-wa>Ver2: WA<a hidden class=anchor aria-hidden=true href=#ver2-wa>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>allOcuurLenFromEnd</span><span class=p>(</span><span class=n>s</span><span class=p>,</span><span class=n>c</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>#print(&#39;find&#39;,c,i,j)</span>
</span></span><span class=line><span class=cl>    <span class=n>ans</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>j</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=n>c</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>i</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>ans</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>j</span><span class=o>-</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>i</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>ans</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>getll</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>limit</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=mi>0</span> <span class=o>&lt;=</span> <span class=n>i</span> <span class=ow>and</span> <span class=mi>0</span> <span class=o>&lt;=</span> <span class=n>j</span> <span class=ow>and</span> <span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s2</span><span class=p>[</span><span class=n>j</span><span class=p>]</span> <span class=ow>and</span> <span class=n>limit</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>ll</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>j</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>limit</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>ll</span>
</span></span><span class=line><span class=cl><span class=n>dp</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>dp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>l</span> <span class=ow>is</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>l</span> <span class=ow>is</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s2</span><span class=p>[</span><span class=n>j</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s2</span><span class=p>[</span><span class=n>j</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=n>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>l</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>s2_start_index</span> <span class=o>=</span> <span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=o>-</span><span class=n>l</span>
</span></span><span class=line><span class=cl>                <span class=n>s2_end_index</span> <span class=o>=</span> <span class=n>j</span>
</span></span><span class=line><span class=cl>                <span class=n>lens</span> <span class=o>=</span> <span class=n>allOcuurLenFromEnd</span><span class=p>(</span><span class=n>s2</span><span class=p>,</span><span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>],</span><span class=n>s2_start_index</span><span class=p>,</span><span class=n>s2_end_index</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;lens&#34;</span><span class=p>,</span><span class=n>lens</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>lens</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>occur_in_s2</span> <span class=o>=</span> <span class=n>j</span><span class=o>-</span><span class=n>x</span><span class=o>+</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>                    <span class=n>pos_to_find_ll_in_s2_from</span> <span class=o>=</span> <span class=n>occur_in_s2</span><span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>                    <span class=n>pos_to_find_ll_in_s1_from</span> <span class=o>=</span> <span class=n>i</span><span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>                    <span class=n>ll</span> <span class=o>=</span> <span class=n>getll</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>pos_to_find_ll_in_s1_from</span><span class=p>,</span><span class=n>pos_to_find_ll_in_s2_from</span><span class=p>,</span><span class=n>l</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>lhs_len</span> <span class=o>=</span> <span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=o>-</span><span class=n>ll</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ll&#34;</span><span class=p>,</span><span class=n>ll</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>lhs_s1_end</span> <span class=o>=</span> <span class=n>i</span><span class=o>-</span><span class=n>x</span><span class=o>-</span><span class=n>ll</span>
</span></span><span class=line><span class=cl>                    <span class=n>lhs_s2_end</span> <span class=o>=</span> <span class=n>j</span><span class=o>-</span><span class=n>x</span><span class=o>-</span><span class=n>ll</span>
</span></span><span class=line><span class=cl>                    <span class=n>rhs_len</span> <span class=o>=</span> <span class=n>x</span> <span class=o>-</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>                    <span class=n>rhs_s1_end</span> <span class=o>=</span> <span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=o>-</span><span class=n>ll</span>
</span></span><span class=line><span class=cl>                    <span class=n>rhs_s2_end</span> <span class=o>=</span> <span class=n>j</span>
</span></span><span class=line><span class=cl>                    <span class=n>ret</span> <span class=o>=</span> <span class=n>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>lhs_s1_end</span><span class=p>,</span><span class=n>lhs_s2_end</span><span class=p>,</span><span class=n>lhs_len</span><span class=p>)</span> <span class=ow>and</span> <span class=n>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=n>rhs_s1_end</span><span class=p>,</span><span class=n>rhs_s2_end</span><span class=p>,</span><span class=n>rhs_len</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ret&#34;</span><span class=p>,</span><span class=n>ret</span><span class=p>,(</span><span class=n>i</span><span class=o>-</span><span class=n>x</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=n>x</span><span class=p>,</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>),(</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>x</span><span class=o>-</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>ret</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=n>ret</span>
</span></span><span class=line><span class=cl>                        <span class=k>return</span> <span class=n>ret</span>
</span></span><span class=line><span class=cl>                <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>((</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>),</span><span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)])</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>isScramble</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>s1</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>s2</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>dp</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>f</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s2</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>))</span>
</span></span></code></pre></div><h2 id=ver2-ac>Ver2: AC<a hidden class=anchor aria-hidden=true href=#ver2-ac>#</a></h2><p>case 有點多</p><ol><li>交叉</li><li>直的</li><li>前或後有一樣的字</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>isScramble</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>s1</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>s2</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>dp</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=n>s2</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=c1>#s1, s2 = removePrefix_postfix(s1,s2)</span>
</span></span><span class=line><span class=cl>        <span class=c1>#if not s1 and not s2:</span>
</span></span><span class=line><span class=cl>        <span class=c1>#    return True</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>                <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=mi>1</span><span class=p>)]</span> <span class=o>=</span> <span class=n>s1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s2</span><span class=p>[</span><span class=n>j</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>l</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)</span><span class=o>+</span><span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>i</span><span class=o>-</span><span class=n>l</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=ow>or</span> <span class=n>j</span><span class=o>-</span><span class=n>l</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>l</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)</span><span class=o>+</span><span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=n>l</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>i</span><span class=o>-</span><span class=n>x</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>                            <span class=k>if</span> <span class=n>j</span><span class=o>-</span><span class=p>(</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                                <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>dp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                                    <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                                <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=ow>or</span> <span class=p>(</span><span class=n>i</span><span class=o>-</span><span class=n>l</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=n>l</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span> <span class=ow>in</span> <span class=n>dp</span> <span class=ow>and</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=o>-</span><span class=n>l</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=n>l</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)]</span> <span class=ow>and</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=o>-</span><span class=mi>1</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>                                <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=o>=</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=p>)]</span> <span class=ow>or</span> <span class=p>(</span><span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=p>(</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>),</span><span class=n>x</span><span class=p>)]</span> <span class=ow>and</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=o>-</span><span class=n>x</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>)])</span> <span class=ow>or</span> <span class=p>(</span><span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=mi>1</span><span class=p>)]</span> <span class=ow>and</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>l</span><span class=o>-</span><span class=mi>1</span><span class=p>)])</span> <span class=ow>or</span> <span class=p>(</span><span class=n>i</span><span class=o>-</span><span class=p>(</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>j</span><span class=o>-</span><span class=p>(</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,(</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>))]</span> <span class=ow>and</span> <span class=n>dp</span><span class=p>[(</span><span class=n>i</span><span class=o>-</span><span class=p>(</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>),</span><span class=n>j</span><span class=o>-</span><span class=p>(</span><span class=n>l</span><span class=o>-</span><span class=n>x</span><span class=p>),</span><span class=n>x</span><span class=p>)])</span>
</span></span><span class=line><span class=cl>                                <span class=c1>#print((i,j,l),dp[(i,j,l)],(i,j-(l-x),x), dp[(i,j-(l-x),x)] ,(i-x,j,l-x), dp[(i-x,j,l-x)])</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>dp</span><span class=p>[(</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s2</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>))]</span>
</span></span></code></pre></div><h2 id=sol>Sol<a hidden class=anchor aria-hidden=true href=#sol>#</a></h2><p>照題目走</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>cache_computing</span><span class=p>(</span><span class=n>f</span><span class=p>,</span><span class=n>is_computing</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>mem</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nd>@functools.wraps</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span><span class=o>**</span><span class=n>kwds</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>args</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>mem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>mem</span><span class=p>[</span><span class=n>args</span><span class=p>]</span> <span class=o>=</span> <span class=n>is_computing</span>
</span></span><span class=line><span class=cl>            <span class=n>mem</span><span class=p>[</span><span class=n>args</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span><span class=o>**</span><span class=n>kwds</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>mem</span><span class=p>[</span><span class=n>args</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nd>@cache_computing</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>isScramble</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>s1</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>s2</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>#print(s1,s2)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>s1</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>s2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>s1</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=n>s2</span><span class=p>[</span><span class=mi>0</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>isScramble</span><span class=p>(</span><span class=n>s1</span><span class=p>[</span><span class=mi>1</span><span class=p>:],</span><span class=n>s2</span><span class=p>[</span><span class=mi>1</span><span class=p>:])</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nb>any</span><span class=p>([(</span><span class=bp>self</span><span class=o>.</span><span class=n>isScramble</span><span class=p>(</span><span class=n>s1</span><span class=p>[</span><span class=n>k</span><span class=p>:],</span><span class=n>s2</span><span class=p>[</span><span class=n>k</span><span class=p>:])</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>isScramble</span><span class=p>(</span><span class=n>s1</span><span class=p>[:</span><span class=n>k</span><span class=p>],</span><span class=n>s2</span><span class=p>[:</span><span class=n>k</span><span class=p>]))</span> <span class=ow>or</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>isScramble</span><span class=p>(</span><span class=n>s1</span><span class=p>[</span><span class=n>k</span><span class=p>:],</span><span class=n>s2</span><span class=p>[:</span><span class=nb>len</span><span class=p>(</span><span class=n>s2</span><span class=p>)</span><span class=o>-</span><span class=n>k</span><span class=p>])</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>isScramble</span><span class=p>(</span><span class=n>s1</span><span class=p>[:</span><span class=n>k</span><span class=p>],</span><span class=n>s2</span><span class=p>[</span><span class=nb>len</span><span class=p>(</span><span class=n>s2</span><span class=p>)</span><span class=o>-</span><span class=n>k</span><span class=p>:]))</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>s1</span><span class=p>))])</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://littlebees.github.io/tags/dynamic-programming/>Dynamic Programming</a></li><li><a href=https://littlebees.github.io/tags/string/>String</a></li></ul><nav class=paginav><a class=prev href=https://littlebees.github.io/2021/07/leetcode-85-maximal-rectangle/><span class=title>« Prev</span><br><span>leetcode-85 - Maximal Rectangle</span>
</a><a class=next href=https://littlebees.github.io/2021/07/leetcode-116-populating-next-right-pointers-in-each-node/><span class=title>Next »</span><br><span>leetcode-116 - Populating Next Right Pointers in Each Node</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://littlebees.github.io/>記事本</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>