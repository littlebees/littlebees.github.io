<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>leetcode-210 - Course Schedule II | 記事本</title>
<meta name=keywords content="Topological Sort,Graph,Breadth-First Search,Depth-First Search,CTCI-COMPLETE-LIST,seanprashad,Top Interview Questions"><meta name=description content="動機
沒辦法用cache_computing偷懶了"><meta name=author content="zhengcf"><link rel=canonical href=https://littlebees.github.io/2021/07/leetcode-210-course-schedule-ii/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://littlebees.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://littlebees.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://littlebees.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://littlebees.github.io/apple-touch-icon.png><link rel=mask-icon href=https://littlebees.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="leetcode-210 - Course Schedule II"><meta property="og:description" content="動機
沒辦法用cache_computing偷懶了"><meta property="og:type" content="article"><meta property="og:url" content="https://littlebees.github.io/2021/07/leetcode-210-course-schedule-ii/"><meta property="og:image" content="https://littlebees.github.io/images/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-25T22:08:04+00:00"><meta property="article:modified_time" content="2021-07-25T22:08:04+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://littlebees.github.io/images/papermod-cover.png"><meta name=twitter:title content="leetcode-210 - Course Schedule II"><meta name=twitter:description content="動機
沒辦法用cache_computing偷懶了"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://littlebees.github.io/posts/"},{"@type":"ListItem","position":2,"name":"leetcode-210 - Course Schedule II","item":"https://littlebees.github.io/2021/07/leetcode-210-course-schedule-ii/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"leetcode-210 - Course Schedule II","name":"leetcode-210 - Course Schedule II","description":"動機 沒辦法用cache_computing偷懶了\n","keywords":["Topological Sort","Graph","Breadth-First Search","Depth-First Search","CTCI-COMPLETE-LIST","seanprashad","Top Interview Questions"],"articleBody":"動機 沒辦法用cache_computing偷懶了\nProblem There are a total of numCourses courses you have to take, labeled from 0 to numCourses - 1. You are given an array prerequisites where prerequisites[i] = [ai, bi] indicates that you must take course bi first if you want to take course ai.\nFor example, the pair [0, 1], indicates that to take course 0 you have to first take course 1.Return the ordering of courses you should take to finish all courses. If there are many valid answers, return any of them. If it is impossible to finish all courses, return an empty array.\nExample 1:\nInput: numCourses = 2, prerequisites = [[1,0]]Output: [0,1]Explanation: There are a total of 2 courses to take. To take course 1 you should have finished course 0. So the correct course order is [0,1].Example 2:\nInput: numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]Output: [0,2,1,3]Explanation: There are a total of 4 courses to take. To take course 3 you should have finished both courses 1 and 2. Both courses 1 and 2 should be taken after you finished course 0.So one correct course order is [0,1,2,3]. Another correct ordering is [0,2,1,3].Example 3:\nInput: numCourses = 1, prerequisites = []Output: [0] Constraints:\n1 \u003c= numCourses \u003c= 20000 \u003c= prerequisites.length \u003c= numCourses * (numCourses - 1)prerequisites[i].length == 20 \u003c= ai, bi \u003c numCoursesai != biAll the pairs [ai, bi] are distinct. Sol 因為求時path可以利用共用的狀態，從原本的找修此課之前要修什麼，變成還要修什麼\ntopo sort還有Kahn’s algorithm\nclass Solution: def findOrder(self, numCourses: int, pres: List[List[int]]) -\u003e List[int]: premises = defaultdict(list) # class, [premises] [premises[c].append(p) for (c,p) in pres] nofrees = set(premises.keys()) frees = set(range(numCourses)) - nofrees seen = {} # True :: done def dfs(c): if c in seen: if seen[c]: return [] else: raise 'loop!!' else: seen[c] = False if c in frees: ret = [] else: ret = list(reduce(lambda ret,p: ret+dfs(p), premises[c], []))+[c] seen[c] = True return ret try: if nofrees: return list(frees)+list(reduce(lambda acc,c: acc+dfs(c), nofrees, [])) else: return list(frees) except: return [] ","wordCount":"321","inLanguage":"en","datePublished":"2021-07-25T22:08:04Z","dateModified":"2021-07-25T22:08:04Z","author":{"@type":"Person","name":"zhengcf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://littlebees.github.io/2021/07/leetcode-210-course-schedule-ii/"},"publisher":{"@type":"Organization","name":"記事本","logo":{"@type":"ImageObject","url":"https://littlebees.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://littlebees.github.io/ accesskey=h title="記事本 (Alt + H)">記事本</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://littlebees.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://littlebees.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://littlebees.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://littlebees.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://littlebees.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">leetcode-210 - Course Schedule II</h1><div class=post-meta><span title='2021-07-25 22:08:04 +0000 UTC'>July 25, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;zhengcf</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%8b%95%e6%a9%9f aria-label=動機>動機</a></li><li><a href=#problem aria-label=Problem>Problem</a></li><li><a href=#sol aria-label=Sol>Sol</a></li></ul></div></details></div><div class=post-content><h2 id=動機>動機<a hidden class=anchor aria-hidden=true href=#動機>#</a></h2><p>沒辦法用cache_computing偷懶了</p><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>#</a></h2><p>There are a total of <code>numCourses</code> courses you have to take, labeled from <code>0</code> to <code>numCourses - 1</code>. You are given an array <code>prerequisites</code> where <code>prerequisites[i] = [a<sub>i</sub>, b<sub>i</sub>]</code> indicates that you <strong>must</strong> take course <code>b<sub>i</sub></code> first if you want to take course <code>a<sub>i</sub></code>.</p><ul><li>For example, the pair <code>[0, 1]</code>, indicates that to take course <code>0</code> you have to first take course <code>1</code>.</li></ul><p>Return <em>the ordering of courses you should take to finish all courses</em>. If there are many valid answers, return <strong>any</strong> of them. If it is impossible to finish all courses, return <strong>an empty array</strong>.</p><p> </p><p><strong>Example 1:</strong></p><pre><strong>Input:</strong> numCourses = 2, prerequisites = [[1,0]]<strong>Output:</strong> [0,1]<strong>Explanation:</strong> There are a total of 2 courses to take. To take course 1 you should have finished course 0. So the correct course order is [0,1].</pre><p><strong>Example 2:</strong></p><pre><strong>Input:</strong> numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]<strong>Output:</strong> [0,2,1,3]<strong>Explanation:</strong> There are a total of 4 courses to take. To take course 3 you should have finished both courses 1 and 2. Both courses 1 and 2 should be taken after you finished course 0.So one correct course order is [0,1,2,3]. Another correct ordering is [0,2,1,3].</pre><p><strong>Example 3:</strong></p><pre><strong>Input:</strong> numCourses = 1, prerequisites = []<strong>Output:</strong> [0]</pre><p> </p><p><strong>Constraints:</strong></p><ul><li><code>1 <= numCourses <= 2000</code></li><li><code>0 <= prerequisites.length <= numCourses * (numCourses - 1)</code></li><li><code>prerequisites[i].length == 2</code></li><li><code>0 <= a<sub>i</sub>, b<sub>i</sub> < numCourses</code></li><li><code>a<sub>i</sub> != b<sub>i</sub></code></li><li>All the pairs <code>[a<sub>i</sub>, b<sub>i</sub>]</code> are <strong>distinct</strong>.</li></ul><h2 id=sol>Sol<a hidden class=anchor aria-hidden=true href=#sol>#</a></h2><p>因為求時path可以利用共用的狀態，從原本的找修此課之前要修什麼，變成<em>還要</em>修什麼</p><p>topo sort還有<a href="https://en.wikipedia.org/wiki/Topological_sorting#Kahn's_algorithm">Kahn&rsquo;s algorithm</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>findOrder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>numCourses</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>pres</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>premises</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span> <span class=c1># class, [premises]</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>premises</span><span class=p>[</span><span class=n>c</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>p</span><span class=p>)</span> <span class=k>for</span> <span class=p>(</span><span class=n>c</span><span class=p>,</span><span class=n>p</span><span class=p>)</span> <span class=ow>in</span> <span class=n>pres</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>nofrees</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>premises</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=n>frees</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=n>numCourses</span><span class=p>))</span> <span class=o>-</span> <span class=n>nofrees</span>
</span></span><span class=line><span class=cl>        <span class=n>seen</span> <span class=o>=</span> <span class=p>{}</span> <span class=c1># True :: done</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>dfs</span><span class=p>(</span><span class=n>c</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>seen</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>seen</span><span class=p>[</span><span class=n>c</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>raise</span> <span class=s1>&#39;loop!!&#39;</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>seen</span><span class=p>[</span><span class=n>c</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>frees</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>ret</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>   
</span></span><span class=line><span class=cl>                    <span class=n>ret</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>reduce</span><span class=p>(</span><span class=k>lambda</span> <span class=n>ret</span><span class=p>,</span><span class=n>p</span><span class=p>:</span> <span class=n>ret</span><span class=o>+</span><span class=n>dfs</span><span class=p>(</span><span class=n>p</span><span class=p>),</span> <span class=n>premises</span><span class=p>[</span><span class=n>c</span><span class=p>],</span> <span class=p>[]))</span><span class=o>+</span><span class=p>[</span><span class=n>c</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>seen</span><span class=p>[</span><span class=n>c</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>ret</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>nofrees</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=n>frees</span><span class=p>)</span><span class=o>+</span><span class=nb>list</span><span class=p>(</span><span class=n>reduce</span><span class=p>(</span><span class=k>lambda</span> <span class=n>acc</span><span class=p>,</span><span class=n>c</span><span class=p>:</span> <span class=n>acc</span><span class=o>+</span><span class=n>dfs</span><span class=p>(</span><span class=n>c</span><span class=p>),</span> <span class=n>nofrees</span><span class=p>,</span> <span class=p>[]))</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=n>frees</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>[]</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://littlebees.github.io/tags/topological-sort/>Topological Sort</a></li><li><a href=https://littlebees.github.io/tags/graph/>Graph</a></li><li><a href=https://littlebees.github.io/tags/breadth-first-search/>Breadth-First Search</a></li><li><a href=https://littlebees.github.io/tags/depth-first-search/>Depth-First Search</a></li><li><a href=https://littlebees.github.io/tags/ctci-complete-list/>CTCI-COMPLETE-LIST</a></li><li><a href=https://littlebees.github.io/tags/seanprashad/>seanprashad</a></li><li><a href=https://littlebees.github.io/tags/top-interview-questions/>Top Interview Questions</a></li></ul><nav class=paginav><a class=prev href=https://littlebees.github.io/2021/07/leetcode-329-longest-increasing-path-in-a-matrix/><span class=title>« Prev</span><br><span>leetcode-329 - Longest Increasing Path in a Matrix</span>
</a><a class=next href=https://littlebees.github.io/2021/07/leetcode-32-longest-valid-parentheses/><span class=title>Next »</span><br><span>leetcode-32 - Longest Valid Parentheses</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://littlebees.github.io/>記事本</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>