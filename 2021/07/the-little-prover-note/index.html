<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="AEpTGuQAkxnTOlmfF4INDna3S660LxrkyZ4BQzVbRSw">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"littlebees.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="動機 久遠筆記搬到github這裡，不過也是改寫超多東西的">
<meta property="og:type" content="article">
<meta property="og:title" content="The little prover 筆記">
<meta property="og:url" content="https://littlebees.github.io/2021/07/the-little-prover-note/index.html">
<meta property="og:site_name" content="記事本">
<meta property="og:description" content="動機 久遠筆記搬到github這裡，不過也是改寫超多東西的">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2021-07-13T16:30:09.000Z">
<meta property="article:modified_time" content="2022-03-31T03:13:16.977Z">
<meta property="article:author" content="zhengcf">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://littlebees.github.io/2021/07/the-little-prover-note/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-tw'
  };
</script>

  <title>The little prover 筆記 | 記事本</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">記事本</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">寫下來，不然會忘</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="https://littlebees.github.io/2021/07/the-little-prover-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhengcf">
      <meta itemprop="description" content="想到什麼就寫什麼">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="記事本">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          The little prover 筆記
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-14 00:30:09" itemprop="dateCreated datePublished" datetime="2021-07-14T00:30:09+08:00">2021-07-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-03-31 11:13:16" itemprop="dateModified" datetime="2022-03-31T11:13:16+08:00">2022-03-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PLT/" itemprop="url" rel="index"><span itemprop="name">PLT</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PLT/Lisp/" itemprop="url" rel="index"><span itemprop="name">Lisp</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PLT/Lisp/Reading/" itemprop="url" rel="index"><span itemprop="name">Reading</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="動機-659">動機</h2>
<p>久遠筆記搬到github這裡，不過也是改寫超多東西的</p>
<span id="more"></span>
<h2 id="keyword">keyword</h2>
<p>premise，在if的條件有可以用在想改寫的東西</p>
<p>theorem，永遠為true的expression (要證過)</p>
<p>axiom，不用證明的theorem</p>
<p>claim，還沒證的theorem</p>
<p>defun，函數，但應該當成類似macro的東西</p>
<p>total，不論什麼參數都會有值的函數</p>
<h2 id="axioms">axioms</h2>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> equal-same (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">equal</span> x x) &#x27;t))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> equal-swap (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">equal</span> x y) (<span class="name">equal</span> y x)))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> equal-if (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">equal</span> x y) (<span class="name">equal</span> x y) &#x27;t))</span><br></pre></td></tr></table></figure>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> if-true (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">if</span> &#x27;t x y) x))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> if-false (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">if</span> &#x27;nil x y) y))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> if-same (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">if</span> x y y) y))</span><br><span class="line">(<span class="name">dethm</span> if-nest-A (<span class="name">x</span> y z)</span><br><span class="line">    (<span class="name">if</span> x (<span class="name">equal</span> (<span class="name">if</span> x y z) y) &#x27;t))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> if-nest-E (<span class="name">x</span> y z)</span><br><span class="line">    (<span class="name">if</span> x &#x27;t (<span class="name">equal</span> (<span class="name">if</span> x y z) z)))</span><br></pre></td></tr></table></figure>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> atom/cons (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">atom</span> (<span class="name">cons</span> x y)) &#x27;nil))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> car/cons (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">car</span> (<span class="name">cons</span> x y)) x))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> cons/car+cdr (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x) &#x27;t (<span class="name">equal</span> (<span class="name">cons</span> (<span class="name">car</span> x) (<span class="name">cdr</span> x)) x)))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> cdr/cons (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">cdr</span> (<span class="name">cons</span> x y)) y))</span><br></pre></td></tr></table></figure>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> natp/size (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">natp</span> (<span class="name">size</span> x)) &#x27;t))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> size/car (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x) &#x27;t (<span class="name">equal</span> (<span class="name">&lt;</span> (<span class="name">size</span> (<span class="name">car</span> x)) (<span class="name">size</span> x)) &#x27;t)))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> size/cdr (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x) &#x27;t (<span class="name">equal</span> (<span class="name">&lt;</span> (<span class="name">size</span> (<span class="name">cdr</span> x)) (<span class="name">size</span> x)) &#x27;t)))</span><br></pre></td></tr></table></figure>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> identity-+ (<span class="name">x</span>)</span><br><span class="line">     (<span class="name">if</span> (<span class="name">natp</span> x) (<span class="name">equal</span> (<span class="name">+</span> <span class="number">0</span> x) x) ‘<span class="literal">t</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> commute-+ (<span class="name">x</span> y)</span><br><span class="line">     (<span class="name">equal</span> (<span class="name">+</span> x y) (<span class="name">+</span> y x)))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> associate+ (<span class="name">x</span> y z)</span><br><span class="line">     (<span class="name">equal</span> (<span class="name">+</span> (<span class="name">+</span> x y) z) (<span class="name">+</span> x (<span class="name">+</span> y z))))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> positives+ (<span class="name">x</span> y)</span><br><span class="line">     (<span class="name">if</span> (<span class="name">&lt;</span> <span class="number">0</span> x) (<span class="name">if</span> (<span class="name">&lt;</span> <span class="number">0</span> y) (<span class="name">equal</span> (<span class="name">&lt;</span> <span class="number">0</span> (<span class="name">+</span> x y)) ‘<span class="literal">t</span>) ‘<span class="literal">t</span>) ‘<span class="literal">t</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> natp+ (<span class="name">x</span> y)</span><br><span class="line">     (<span class="name">if</span> (<span class="name">natp</span> x) (<span class="name">if</span> (<span class="name">natp</span> y) (<span class="name">equal</span> (<span class="name">natp</span> (<span class="name">+</span> x y)) ‘<span class="literal">t</span>) ‘<span class="literal">t</span>) ‘<span class="literal">t</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span>  common-addends-&lt; (<span class="name">x</span> y z)</span><br><span class="line">     (<span class="name">equal</span> (<span class="name">&lt;</span> (<span class="name">+</span> x z) (<span class="name">+</span> y z)) (<span class="name">&lt;</span> x y)))</span><br></pre></td></tr></table></figure>
<h2 id="怎麼用theorem">怎麼用theorem</h2>
<p>要改寫用的equal只能在if-answer或if-else，同時該equal不能出現在if-question或function call的參數中．</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> ?? (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">A</span> x) </span><br><span class="line">        (<span class="name">if</span> (<span class="name">B</span> x)</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">F1</span> x) &#x27;<span class="number">1</span>)</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">F2</span> x) &#x27;<span class="number">2</span>)) </span><br><span class="line">        (<span class="name">if</span> (<span class="name">C</span> x)</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">F3</span> x) &#x27;<span class="number">3</span>)</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">F4</span> x) &#x27;<span class="number">4</span>)))) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="name">cons</span> &#x27;gyre</span><br><span class="line">     (<span class="name">if</span> (<span class="name">C</span> &#x27;(callooh callay)) </span><br><span class="line">        (<span class="name">cons</span> &#x27;gimble</span><br><span class="line">          (<span class="name">if</span> (<span class="name">A</span> &#x27;(callooh callay)) </span><br><span class="line">              (<span class="name">cons</span> &#x27;<span class="number">1</span> &#x27;(outgrabe))</span><br><span class="line">              (<span class="name">cons</span> &#x27;<span class="number">3</span> &#x27;(wabe))))</span><br><span class="line">        (<span class="name">cons</span> (<span class="name">F4</span> &#x27;(callooh callay)) &#x27;(vorpal))))</span><br></pre></td></tr></table></figure>
<p>試著用??來改寫這個式子．</p>
<p><code>(F4 '(callooh callay))</code>能被改寫成’4嗎？</p>
<p>有C的前提，同時該位置也在if-else，但是沒有A的前提，所以不行．</p>
<p>那1與3可以改寫成(F1 …)與(F2 …)嗎？</p>
<p>可以！！</p>
<p>A與C的前提都有，同時都在相對應的位置上，所以可以．</p>
<h2 id="要total才行，partial-function">要total才行，partial function</h2>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> partial (<span class="name">x</span>)</span><br><span class="line">     (<span class="name">if</span> (<span class="name">partial</span> x)</span><br><span class="line">         &#x27;nil</span><br><span class="line">         &#x27;t))</span><br></pre></td></tr></table></figure>
<p><code>(dethm contradiction () 'nil)</code></p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">‘<span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<p>-&gt; if-same</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">partial</span> x) <span class="literal">nil</span> <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<p>-&gt; if-nest-A (enlarge</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">partial</span> x)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">partial</span> x) <span class="literal">nil</span> <span class="literal">t</span>)</span><br><span class="line">    ‘<span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<p>-&gt; if-nest-E (enlarge</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">partial</span> x)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">partial</span> x) <span class="literal">nil</span> <span class="literal">t</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">partial</span> x) <span class="literal">t</span> <span class="literal">nil</span>))</span><br></pre></td></tr></table></figure>
<p>-&gt; expand(use) (partial x) (self-reference)</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">partial</span> x)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">partial</span> x) <span class="literal">nil</span> <span class="literal">t</span>) <span class="literal">nil</span> <span class="literal">t</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">partial</span> x) <span class="literal">nil</span> <span class="literal">t</span>) <span class="literal">t</span> <span class="literal">nil</span>))</span><br></pre></td></tr></table></figure>
<p>-&gt; if-nest-A &amp; if-nest-E (shrink</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (....)</span><br><span class="line">    (<span class="name">if</span> <span class="literal">nil</span> <span class="literal">nil</span> <span class="literal">t</span>)</span><br><span class="line">    (<span class="name">if</span> <span class="literal">t</span> <span class="literal">t</span> <span class="literal">nil</span>))</span><br></pre></td></tr></table></figure>
<p>-&gt; t</p>
<h2 id="measure">measure</h2>
<p>measure，追蹤某個參數的長度 (證明遞迴會收斂)</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> sub (<span class="name">x</span> y)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">equal</span> y &#x27;?)</span><br><span class="line">        x</span><br><span class="line">        y)</span><br><span class="line">    (<span class="name">cons</span> (<span class="name">sub</span> x (<span class="name">car</span> y))</span><br><span class="line">        (<span class="name">sub</span> x (<span class="name">cdr</span> y)))))</span><br><span class="line">measure: (<span class="name">size</span> y)</span><br></pre></td></tr></table></figure>
<p>totality claim</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">natp</span> (<span class="name">size</span> x))</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        &#x27;t</span><br><span class="line">        (<span class="name">&lt;</span> (<span class="name">size</span> (<span class="name">cdr</span> x)) (<span class="name">size</span> x)))</span><br><span class="line">    &#x27;nil)</span><br></pre></td></tr></table></figure>
<h2 id="If-Lifting">If Lifting</h2>
<p><code>(A (if x y z)) -&gt; (if x (A y) (A z))</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(ctx</span><br><span class="line">    (focus</span><br><span class="line">      (if Q A E)))</span><br></pre></td></tr></table></figure>
<p>=&gt; if-same</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(ctx</span><br><span class="line">  (if Q</span><br><span class="line">    (focus</span><br><span class="line">        (if Q A E))</span><br><span class="line">    (focus</span><br><span class="line">        (if Q A E))))</span><br></pre></td></tr></table></figure>
<p>=&gt; if-next-A&amp;E</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(ctx</span><br><span class="line">  (if Q</span><br><span class="line">    (focus</span><br><span class="line">         A)</span><br><span class="line">    (focus</span><br><span class="line">         E)))</span><br></pre></td></tr></table></figure>
<h2 id="做Totality-Claims">做Totality Claims</h2>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> add-atoms (<span class="name">x</span> ys)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">member</span>? x ys)</span><br><span class="line">            ys</span><br><span class="line">            (<span class="name">cons</span> x ys))</span><br><span class="line">        (<span class="name">add-atoms</span> (<span class="name">car</span> x)</span><br><span class="line">            (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))))</span><br></pre></td></tr></table></figure>
<p>基本上就是把每一次遞迴所apply的參數，apply到measure去，同時寫下這次遞迴比原本的measure小</p>
<ol>
<li>針對每個case建分支</li>
</ol>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        ...</span><br><span class="line">        ...)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>找自己的遞迴，沒有的直接換成’t</li>
</ol>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        &#x27;t</span><br><span class="line">        ...)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>從第一個遞迴開始轉成measure，measure參數代此遞迴的參數，如果不只一個就用if包起來</li>
</ol>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        &#x27;t</span><br><span class="line">        (<span class="name">if</span> (<span class="name">&lt;</span> (<span class="name">size</span> (<span class="name">car</span> x)) (<span class="name">size</span> x))</span><br><span class="line">            (<span class="name">&lt;</span> (<span class="name">size</span> (<span class="name">cdr</span> x)) (<span class="name">size</span> x))</span><br><span class="line">            <span class="literal">nil</span>))</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>最後用natp包起來(證明size是自然數)</li>
</ol>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">natp</span> (<span class="name">size</span> x))</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">            &#x27;t</span><br><span class="line">            (<span class="name">if</span> (<span class="name">&lt;</span> (<span class="name">size</span> (<span class="name">car</span> x)) (<span class="name">size</span> x))</span><br><span class="line">                (<span class="name">&lt;</span> (<span class="name">size</span> (<span class="name">cdr</span> x)) (<span class="name">size</span> x))</span><br><span class="line">                &#x27;nil))</span><br><span class="line">    &#x27;nil)</span><br></pre></td></tr></table></figure>
<h2 id="做induction-template">做induction template</h2>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> set? (<span class="name">xs</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> xs)</span><br><span class="line">        &#x27;t</span><br><span class="line">        (<span class="name">if</span> (<span class="name">member</span>? (<span class="name">car</span> xs) (<span class="name">cdr</span> xs))</span><br><span class="line">            &#x27;nil</span><br><span class="line">            (<span class="name">set</span>? (<span class="name">cdr</span> xs)))))</span><br><span class="line">(<span class="name">defun</span> add-atoms (<span class="name">x</span> ys)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">member</span>? x ys)</span><br><span class="line">            ys</span><br><span class="line">            (<span class="name">cons</span> x ys))</span><br><span class="line">        (<span class="name">add-atoms</span> (<span class="name">car</span> x)</span><br><span class="line">            (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))))</span><br></pre></td></tr></table></figure>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> set?/add-atoms (<span class="name">a</span>)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a &#x27;())) &#x27;t))</span><br></pre></td></tr></table></figure>
<ol>
<li>把所有東西參數化</li>
</ol>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) &#x27;t)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>分析裡面的參數，讓他在所有情況下都會成立</li>
</ol>
<p>先從bs開始，因為在add-atoms裡面他沒有涉及到遞迴的部分，比較簡單</p>
<p>要怎麼讓<code>(equal (set? (add-atoms a bs)) 't)</code>成立?<br>
bs要讓set?為’t</p>
<ol start="2">
<li>讓主體的前提滿足</li>
</ol>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) &#x27;t)</span><br><span class="line">    &#x27;t))</span><br></pre></td></tr></table></figure>
<p>只要有bs都會有這一段，等一下還會看到很多次</p>
<p>接著是a，他有兩個case</p>
<p>atom，沒有遞迴，直接抄前面的</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">        (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) &#x27;t)</span><br><span class="line">        &#x27;t))</span><br><span class="line">    ...)</span><br></pre></td></tr></table></figure>
<p>list，有遞迴裡面有遞迴!!<br>
<code>(add-atoms (car x) (add-atoms (cdr x) ys))</code></p>
<p>先處理最外面的add-atoms，直接把<code>(car x)</code>與<code>(add-atoms (cdr x) ys)</code>當成input，試著讓我們要證的東西成立</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))) &#x27;t)</span><br><span class="line">    &#x27;t))</span><br></pre></td></tr></table></figure>
<p>剛剛是第一個前提，接著是<code>(add-atoms (cdr x) ys)</code>，用同樣的方法</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">set</span>? (<span class="name">cdr</span> x))</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys) &#x27;t)</span><br><span class="line">    &#x27;t))</span><br></pre></td></tr></table></figure>
<p>這是第二個前提，我們把所有前依據以順序組合在一起(用if)</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">        (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) &#x27;t)</span><br><span class="line">        &#x27;t)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))</span><br><span class="line">            (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))) &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">cdr</span> x))</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys) &#x27;t)</span><br><span class="line">                &#x27;t))</span><br><span class="line">                ...</span><br><span class="line">                &#x27;t)))</span><br></pre></td></tr></table></figure>
<p>最後的…，就是我們在這個case原本想證的東西</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">        (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) &#x27;t)</span><br><span class="line">        &#x27;t)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))</span><br><span class="line">            (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))) &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">cdr</span> x))</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys) &#x27;t)</span><br><span class="line">                &#x27;t))</span><br><span class="line">                (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">                    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) &#x27;t)</span><br><span class="line">                    &#x27;t))</span><br><span class="line">                &#x27;t)))</span><br></pre></td></tr></table></figure>
<p>等等，有些變數對不上啊<br>
其實變數就依據case的變數去改就好，alpha reduction</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? ys)</span><br><span class="line">        (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a ys)) &#x27;t)</span><br><span class="line">        &#x27;t)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))</span><br><span class="line">            (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys))) &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">cdr</span> x))</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) ys) &#x27;t)</span><br><span class="line">                &#x27;t))</span><br><span class="line">                (<span class="name">if</span> (<span class="name">set</span>? ys)</span><br><span class="line">                    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> x ys)) &#x27;t)</span><br><span class="line">                    &#x27;t))</span><br><span class="line">                &#x27;t)))</span><br></pre></td></tr></table></figure>
<p>看到這裡，會發現totality claim與induction template的做法其實很像</p>
<ol>
<li>分析case</li>
<li>從被遞迴的input開始，切case</li>
<li>沒遞迴的case就是滿足其他參數的條件，包好就完成沒遞迴的case</li>
<li>遞迴的case要從最外層的遞迴一層一層建，建法與沒遞迴的case的結果很像，不過參數要代成遞迴時代入的參數</li>
<li>把所有前提寫完，就把要證的帶進去，當然要注意其他參數的條件要滿足!!</li>
</ol>
<p>這邊附上兩個常見template</p>
<h3 id="Proof-by-List-Induction">Proof by List Induction</h3>
<p>measure: (size x)</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    C</span><br><span class="line">    (<span class="name">if</span> Ccdr</span><br><span class="line">        C</span><br><span class="line">        &#x27;t))</span><br></pre></td></tr></table></figure>
<h3 id="Proof-by-Star-Induction">Proof by Star Induction</h3>
<p>measure: (size x)</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    C</span><br><span class="line">    (<span class="name">if</span> Ccar</span><br><span class="line">        (<span class="name">if</span> Ccdr</span><br><span class="line">            C </span><br><span class="line">            <span class="literal">t</span>)</span><br><span class="line">    &#x27;t))</span><br></pre></td></tr></table></figure>
<h2 id="Insights">Insights</h2>
<h3 id="選好做的">選好做的</h3>
<p>But some approaches will find a proof faster than others.</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">equal</span> (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">first-of</span> (<span class="name">cons</span> a (<span class="name">cons</span> &#x27;? &#x27;()))) </span><br><span class="line">                  &#x27;?)</span><br><span class="line">            &#x27;t</span><br><span class="line">            (<span class="name">equal</span> (<span class="name">second-of</span> (<span class="name">cons</span> a (<span class="name">cons</span> &#x27;? &#x27;()))) ?))</span><br><span class="line">        ‘<span class="literal">t</span>)</span><br></pre></td></tr></table></figure>
<p>如果從second-of開始改寫，會變成’t，就可以if-same再改成’t</p>
<p>這樣就不用管first-of如何．</p>
<h3 id="Insight-Rewrite-from-the-Inside-Out">Insight: Rewrite from the Inside Out</h3>
<p>從if-ans,if-else, arg來改寫，再apply func，如果真的不行了，再改寫外部．</p>
<h3 id="Insight-Pull-Ifs-Outward">Insight: Pull Ifs Outward</h3>
<p>當if被func或其他if包起來時，用if lifting把if拉出來．</p>
<h3 id="Insight-Keep-Theorems-in-Mind">Insight: Keep Theorems in Mind</h3>
<p>看到可以用的就用，看到很像的，想辦法改寫到可以用．</p>
<h3 id="Insight-Don’t-Touch-Inductive-Premises">Insight: Don’t Touch Inductive Premises</h3>
<p>歸納前提就是重點，不要動</p>
<p>如果不能用，也許是</p>
<ol>
<li>用錯歸納法template了</li>
<li>需要其他lemma</li>
</ol>
<h3 id="Insight-Combine-Ifs">Insight: Combine Ifs</h3>
<p>用if lifting把if條件中的if拿出來</p>
<h3 id="Insight-Create-Helpers-for-Induction">Insight: Create Helpers for Induction</h3>
<p>To rewrite the application of a recursive function, prove a separate theorem about the recursive function using induction. Do this if the current proof either does not use induction, or uses induction for a different kind of recursion from the function, or uses induction on different arguments from the application.</p>
<h3 id="Insight-Create-Helpers-for-Repetition">Insight: Create Helpers for Repetition</h3>
<p>If a proof performs similar sequences of steps over and over, state a theorem that can perform the same rewrite as those steps via the Law of Dethm. Use that theorem in place of the sequence of steps to shorten the proof.</p>
<h2 id="proof-for-memb-remb">proof for memb?/remb</h2>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> remb (<span class="name">xs</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> xs)</span><br><span class="line">        &#x27;()</span><br><span class="line">        (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> xs) &#x27;?)</span><br><span class="line">            (<span class="name">remb</span> (<span class="name">cdr</span> xs))</span><br><span class="line">            (<span class="name">cons</span> (<span class="name">car</span> xs)</span><br><span class="line">                (<span class="name">remb</span> (<span class="name">cdr</span> xs))))))</span><br><span class="line"></span><br><span class="line">(<span class="name">defun</span> memb? (<span class="name">xs</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> xs)</span><br><span class="line">        &#x27;nil</span><br><span class="line">        (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> xs) &#x27;?)</span><br><span class="line">            &#x27;t</span><br><span class="line">            (<span class="name">memb</span>? (<span class="name">cdr</span> xs)))))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> memb?/remb (<span class="name">xs</span>)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">memb</span>? (<span class="name">remb</span> xs)) &#x27;nil))</span><br></pre></td></tr></table></figure>
<p>the inductive claim</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> xs)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">memb</span>? (<span class="name">remb</span> xs)) &#x27;nil)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">memb</span>? (<span class="name">remb</span> (<span class="name">cdr</span> xs))) &#x27;nil)</span><br><span class="line">        (<span class="name">equal</span> (<span class="name">memb</span>? (<span class="name">remb</span> xs)) &#x27;nil)</span><br><span class="line">        &#x27;t))</span><br></pre></td></tr></table></figure>
<p>先從(atom xs)的if-ans開始</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> xs)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">memb</span>?</span><br><span class="line">              (<span class="name">if</span> (<span class="name">atom</span> xs)</span><br><span class="line">                  ‘()</span><br><span class="line">                  (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> xs) ‘?)</span><br><span class="line">                      (<span class="name">remb</span> (<span class="name">cdr</span> xs))</span><br><span class="line">                      (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs))))))</span><br><span class="line">            <span class="literal">nil</span>)</span><br><span class="line">    ...)</span><br></pre></td></tr></table></figure>
<p>-&gt; if-nest-A</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> xs)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">memb</span>? ‘()) <span class="literal">nil</span>)</span><br><span class="line">    ...)</span><br></pre></td></tr></table></figure>
<p>-&gt; expand memb? &amp; atom &amp; if-true</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> xs)</span><br><span class="line">    &#x27;t</span><br><span class="line">    ...)</span><br></pre></td></tr></table></figure>
<p>接著是not (atom xs)與(equal (memb? (remb (cdr xs))) nil)</p>
<p>(equal (memb? (remb xs)) nil)</p>
<p>-&gt; remb</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">equal</span> (<span class="name">memb</span>?</span><br><span class="line">        (<span class="name">if</span> (<span class="name">atom</span> xs) ‘()</span><br><span class="line">        (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> xs) ‘?)</span><br><span class="line">            (<span class="name">remb</span> (<span class="name">cdr</span> xs)</span><br><span class="line">            (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs)))))</span><br><span class="line">      <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<p>-&gt; if-nest-E &amp; if lifting for memb?</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">equal</span> (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> xs) ‘?)</span><br><span class="line">            (<span class="name">memb</span>? (<span class="name">remb</span> (<span class="name">cdr</span> xs))</span><br><span class="line">            (<span class="name">memb</span>? (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs)))))</span><br><span class="line">      <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<p>-&gt; inductive premise</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">equal</span> (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> xs) ‘?)</span><br><span class="line">            <span class="literal">nil</span></span><br><span class="line">            (<span class="name">memb</span>? (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs)))))</span><br><span class="line">      <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<p>-&gt; memb?</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">equal</span> (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> xs) ‘?)</span><br><span class="line">            <span class="literal">nil</span></span><br><span class="line">            (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs))))</span><br><span class="line">                ‘<span class="literal">nil</span></span><br><span class="line">                (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs)))) ‘?)</span><br><span class="line">                    ‘<span class="literal">t</span></span><br><span class="line">                    (<span class="name">memb</span>? (<span class="name">cdr</span> (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs)))))))</span><br><span class="line">      <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<p>-&gt; atom/cons &amp; if-false</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">equal</span> (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> xs) ‘?)</span><br><span class="line">            <span class="literal">nil</span></span><br><span class="line">            (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">car</span> (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs)))) ‘?)</span><br><span class="line">                ‘<span class="literal">t</span></span><br><span class="line">                (<span class="name">memb</span>? (<span class="name">cdr</span> (<span class="name">cons</span> (<span class="name">car</span> xs) (<span class="name">remb</span> (<span class="name">cdr</span> xs))))))</span><br><span class="line">	    <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<p>-&gt; car/cons &amp; if-false &amp; cdr/cons &amp; inductive premise</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">equal</span> (<span class="name">if</span> (...) <span class="literal">nil</span> <span class="literal">nil</span>) <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<p>-&gt; if-same &amp; equal-same</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">t</span></span><br></pre></td></tr></table></figure>
<h2 id="proof-for-ctx-sub">proof for ctx?/sub</h2>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> ctx? (<span class="name">x</span>)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    (<span class="name">equal</span> x &#x27;?)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> x))</span><br><span class="line">      &#x27;t</span><br><span class="line">      (<span class="name">ctx</span>? (<span class="name">cdr</span> x)))))</span><br><span class="line"></span><br><span class="line">(<span class="name">defun</span> sub (<span class="name">x</span> y)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">equal</span> y &#x27;?)</span><br><span class="line">      x</span><br><span class="line">      y)</span><br><span class="line">    (<span class="name">cons</span> (<span class="name">sub</span> x (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">sub</span> x (<span class="name">cdr</span> y)))))</span><br></pre></td></tr></table></figure>
<p>證</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> ctx?/sub (<span class="name">x</span> y)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y)) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">  &#x27;t))</span><br></pre></td></tr></table></figure>
<p>把body填入templete(有夠噁心的</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">	(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">      (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y)) &#x27;t)</span><br><span class="line">      &#x27;t)</span><br><span class="line">  &#x27;t)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">      &#x27;t)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">            ‘<span class="literal">t</span>)</span><br><span class="line">			    (<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y)) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">        ‘<span class="literal">t</span>))</span><br></pre></td></tr></table></figure>
<p>先看到有一堆(if (ctx? x)，用if lifting抽出來(這裡就不好用(A (if …)) -&gt; (if (A ….))來理解，要用if-same來做就很直覺)</p>
<p>同時把if-else的部分用if-same去掉</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">        (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y)) &#x27;t)</span><br><span class="line">        &#x27;t)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y)) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>對sub用if-nest-A</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">if</span> (<span class="name">equal</span> y &#x27;?) x y)) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y)) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>if lifting</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x) <span class="comment">;; 可以用這個改寫成’t嗎</span></span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">equal</span> y &#x27;?)</span><br><span class="line">      	    (<span class="name">equal</span> (<span class="name">ctx</span>? x) &#x27;t) <span class="comment">;; 不行，(ctx? x)可以是’t以外的東西(total)，也沒定理</span></span><br><span class="line">            (<span class="name">equal</span> (<span class="name">ctx</span>? y) &#x27;t))</span><br><span class="line">        &#x27;t)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y)) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>但ctx?只會回傳’t或’nil而且如果我們有這種定理的話？</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> ctx?/t (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">        (<span class="name">equal</span> (<span class="name">ctx</span>? x) ‘<span class="literal">t</span>)</span><br><span class="line">        ‘<span class="literal">t</span>))</span><br></pre></td></tr></table></figure>
<p>那就可以改寫了</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">equal</span> y &#x27;?)</span><br><span class="line">      	    ‘<span class="literal">t</span></span><br><span class="line">            ‘<span class="literal">t</span>)) </span><br><span class="line">        &#x27;t)</span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y)) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>if-same*2</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      ‘<span class="literal">t</span></span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x y) &#x27;t)</span><br><span class="line">                &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>atom與if-nest-E</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      ‘<span class="literal">t</span></span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">cons</span> (<span class="name">sub</span> x (<span class="name">car</span> y)) (<span class="name">sub</span> (<span class="name">cdr</span> y)))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">            &#x27;t)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>ctx?</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      ‘<span class="literal">t</span></span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">          &#x27;t)</span><br><span class="line">          (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">                  (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">                  &#x27;t)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">ctx</span>? y)</span><br><span class="line">                  (<span class="name">equal</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y)))</span><br><span class="line">                              ‘<span class="literal">t</span></span><br><span class="line">                              (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))))</span><br><span class="line">                        &#x27;t)</span><br><span class="line">                  &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>ctx?</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      ‘<span class="literal">t</span></span><br><span class="line">      (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y)) <span class="comment">;; here</span></span><br><span class="line">              (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">          (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">                &#x27;t)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y)) <span class="comment">;; here</span></span><br><span class="line">                      ‘<span class="literal">t</span></span><br><span class="line">                      (<span class="name">ctx</span>? (<span class="name">cdr</span> y)))</span><br><span class="line">                  (<span class="name">equal</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y)))</span><br><span class="line">                            ‘<span class="literal">t</span></span><br><span class="line">                            (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))))</span><br><span class="line">                        &#x27;t)</span><br><span class="line">                  &#x27;t)</span><br><span class="line">              &#x27;t)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>if lifting</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      ‘<span class="literal">t</span></span><br><span class="line">      (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y))) &#x27;t)<span class="comment">;; inductive promsing!!</span></span><br><span class="line">                (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">                        (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">                        &#x27;t)</span><br><span class="line">                    (<span class="name">equal</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y)))</span><br><span class="line">                                ‘<span class="literal">t</span></span><br><span class="line">                                (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))))</span><br><span class="line">                            &#x27;t)</span><br><span class="line">                    &#x27;t)</span><br><span class="line">                (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">                        (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">                        &#x27;t)</span><br><span class="line">                    (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">                        (<span class="name">equal</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y)))</span><br><span class="line">                                    ‘<span class="literal">t</span></span><br><span class="line">                                    (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))))</span><br><span class="line">                                &#x27;t)</span><br><span class="line">                        &#x27;t)</span><br><span class="line">                    ‘<span class="literal">t</span>))))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>inductive promsing</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      ‘<span class="literal">t</span></span><br><span class="line">      (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">                <span class="literal">t</span></span><br><span class="line">                (<span class="name">if</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">                        (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t)</span><br><span class="line">                        &#x27;t)</span><br><span class="line">                    (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">                        (<span class="name">equal</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y)))</span><br><span class="line">                                    ‘<span class="literal">t</span></span><br><span class="line">                                    (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))))</span><br><span class="line">                                &#x27;t)</span><br><span class="line">                        &#x27;t)</span><br><span class="line">                    ‘<span class="literal">t</span>)))</span><br><span class="line"></span><br><span class="line">&#x27;t)</span><br></pre></td></tr></table></figure>
<p>if lifting</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">ctx</span>? x)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> y)</span><br><span class="line">      ‘<span class="literal">t</span></span><br><span class="line">      (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">car</span> y))</span><br><span class="line">          <span class="literal">t</span></span><br><span class="line">          (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">cdr</span> y))</span><br><span class="line">              (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))) &#x27;t) <span class="comment">;; inductive promsing!!</span></span><br><span class="line">                  (<span class="name">equal</span> (<span class="name">if</span> (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">car</span> y)))</span><br><span class="line">                                ‘<span class="literal">t</span></span><br><span class="line">                                (<span class="name">ctx</span>? (<span class="name">sub</span> x (<span class="name">cdr</span> y))))</span><br><span class="line">                          ‘<span class="literal">t</span>)</span><br><span class="line">                  &#x27;t)</span><br><span class="line">              ‘<span class="literal">t</span>)))</span><br><span class="line">  &#x27;t)</span><br></pre></td></tr></table></figure>
<p>inductive promsing &amp; if-same &amp; if-true</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t</span><br></pre></td></tr></table></figure>
<p>(剩下的那一個，就pass，打這個好累)</p>
<p>發現有許多差不多的前提，用if-nest-A/E或if lifting把他們化簡</p>
<p>把inductive promise湊出來</p>
<p>一次化簡或處理一個case</p>
<h2 id="proof-for-set-add-atoms">proof for set?/add-atoms</h2>
<p>if lifting is our friend.</p>
<p>(atom case) add-atoms, if-nest-A, (atom a)</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">      	(<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">if</span> (<span class="name">member</span>? a bs)</span><br><span class="line">                          bs</span><br><span class="line">                          (<span class="name">cons</span> a bs))) ‘<span class="literal">t</span>)</span><br><span class="line">	      ‘<span class="literal">t</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))</span><br><span class="line">	          (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">	          ‘<span class="literal">t</span>)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">	              (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) ‘<span class="literal">t</span>)</span><br><span class="line">	              ‘<span class="literal">t</span>)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                ‘<span class="literal">t</span>)</span><br><span class="line">            ‘<span class="literal">t</span>)</span><br><span class="line">        ‘<span class="literal">t</span>))</span><br></pre></td></tr></table></figure>
<p>if lifting, promise (another claim)</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">      	(<span class="name">equal</span> (<span class="name">if</span> (<span class="name">member</span>? a bs)</span><br><span class="line">                    (<span class="name">set</span>? bs)</span><br><span class="line">                    (<span class="name">set</span>? (<span class="name">cons</span> a bs))) ‘<span class="literal">t</span>)</span><br><span class="line">	      ‘<span class="literal">t</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))</span><br><span class="line">	          (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">	          ‘<span class="literal">t</span>)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">	              (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) ‘<span class="literal">t</span>)</span><br><span class="line">	              ‘<span class="literal">t</span>)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                ‘<span class="literal">t</span>)</span><br><span class="line">            ‘<span class="literal">t</span>)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br></pre></td></tr></table></figure>
<p>set?, member?, if-nest-E, if-same, equal, if-same</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))</span><br><span class="line">	          (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">	          ‘<span class="literal">t</span>)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">	              (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) ‘<span class="literal">t</span>)</span><br><span class="line">	              ‘<span class="literal">t</span>)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                ‘<span class="literal">t</span>)</span><br><span class="line">            ‘<span class="literal">t</span>)</span><br><span class="line">          ‘<span class="literal">t</span>))</span><br></pre></td></tr></table></figure>
<p>if lifting</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))</span><br><span class="line">	          (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">	          ‘<span class="literal">t</span>)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                ‘<span class="literal">t</span>)</span><br><span class="line">            &#x27;t)</span><br><span class="line">        ‘<span class="literal">t</span>))</span><br></pre></td></tr></table></figure>
<p>if lifting again!!</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">                ‘<span class="literal">t</span>)</span><br><span class="line">            (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                ‘<span class="literal">t</span>)</span><br><span class="line">            ‘<span class="literal">t</span>)</span><br><span class="line">        &#x27;t))</span><br></pre></td></tr></table></figure>
<p>if lifting</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) <span class="comment">;;可以用嗎？</span></span><br><span class="line">          (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                  (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                  ‘<span class="literal">t</span>)</span><br><span class="line">              ‘<span class="literal">t</span>)</span><br><span class="line">          (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) ‘<span class="literal">t</span>) <span class="comment">;; need a new claim</span></span><br><span class="line">              (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">              ‘<span class="literal">t</span>))</span><br><span class="line">        &#x27;t))</span><br></pre></td></tr></table></figure>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> set?/nil (<span class="name">xs</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? xs)</span><br><span class="line">        ‘<span class="literal">t</span></span><br><span class="line">        (<span class="name">equal</span> (<span class="name">set</span>? xs) ‘<span class="literal">nil</span>)))</span><br></pre></td></tr></table></figure>
<p>set?/nil &amp; set?/t</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) <span class="comment">;;用!!</span></span><br><span class="line">          (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">              (<span class="name">if</span> (<span class="name">equal</span> ‘<span class="literal">t</span> ‘<span class="literal">t</span>)</span><br><span class="line">                  (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">                  ‘<span class="literal">t</span>)</span><br><span class="line">              ‘<span class="literal">t</span>)</span><br><span class="line">          (<span class="name">if</span> (<span class="name">equal</span> ‘<span class="literal">nil</span> ‘<span class="literal">t</span>)</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">              ‘<span class="literal">t</span>))</span><br><span class="line">        &#x27;t))</span><br></pre></td></tr></table></figure>
<p>equal</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))</span><br><span class="line">          (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">              (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a bs)) ‘<span class="literal">t</span>)</span><br><span class="line">              ‘<span class="literal">t</span>)</span><br><span class="line">           <span class="literal">t</span>)</span><br><span class="line">        &#x27;t))</span><br></pre></td></tr></table></figure>
<p>add-atoms &amp; if-nest-E</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> a)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">set</span>? bs)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs)) <span class="comment">;;用!!</span></span><br><span class="line">          (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">               (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> (<span class="name">car</span> x) (<span class="name">add-atoms</span> (<span class="name">cdr</span> x) bs))) ‘<span class="literal">t</span>)</span><br><span class="line">              ‘<span class="literal">t</span>)</span><br><span class="line">           <span class="literal">t</span>)</span><br><span class="line">        &#x27;t))</span><br></pre></td></tr></table></figure>
<p>promise</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">t</span></span><br></pre></td></tr></table></figure>
<p>證原本要證的</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">dethm</span> set?/atoms (<span class="name">a</span>)</span><br><span class="line">      (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">atoms</span> a)) &#x27;t))</span><br></pre></td></tr></table></figure>
<p>先把<code>(atoms a)</code>換成<code>(add-atoms a ‘())</code></p>
<p><code>(equal (set? (dad-atoms a ‘())) 't)</code></p>
<p>要有<code>(set? xs)</code>，才能用set?/add-atoms</p>
<p>if-true</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> <span class="literal">t</span></span><br><span class="line">    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a ‘())) &#x27;t)</span><br><span class="line">    <span class="literal">t</span>)</span><br></pre></td></tr></table></figure>
<p>if-true</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">if</span> <span class="literal">t</span></span><br><span class="line">        <span class="literal">t</span></span><br><span class="line">        (<span class="name">if</span> (<span class="name">member</span>? (<span class="name">car</span> ‘()) (<span class="name">cdr</span> ‘()))</span><br><span class="line">            <span class="literal">nil</span></span><br><span class="line">	          (<span class="name">set</span>? (<span class="name">cdr</span> ‘()))))</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a ‘())) &#x27;t)</span><br><span class="line">    <span class="literal">t</span>)</span><br></pre></td></tr></table></figure>
<p><code>(equal t (atom ())</code></p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">if</span> (<span class="name">atom</span> ())</span><br><span class="line">        <span class="literal">t</span></span><br><span class="line">        (<span class="name">if</span> (<span class="name">member</span>? (<span class="name">car</span> ‘()) (<span class="name">cdr</span> ‘()))</span><br><span class="line">            <span class="literal">nil</span></span><br><span class="line">	          (<span class="name">set</span>? (<span class="name">cdr</span> ‘()))))</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a ‘())) &#x27;t)</span><br><span class="line">    <span class="literal">t</span>)</span><br></pre></td></tr></table></figure>
<p>set?</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">set</span>? ())</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">set</span>? (<span class="name">add-atoms</span> a ‘())) &#x27;t)</span><br><span class="line">    <span class="literal">t</span>)</span><br></pre></td></tr></table></figure>
<p>set?/add-atoms</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">t</span></span><br></pre></td></tr></table></figure>
<h2 id="Ch10-different-measure-change-the-promise">Ch10 different measure &amp; change the promise</h2>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> rotate (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">cons</span> (<span class="name">car</span> (<span class="name">car</span> x))</span><br><span class="line">        (<span class="name">cons</span> (<span class="name">cdr</span> (<span class="name">car</span> x)) (<span class="name">cdr</span> x))))</span><br><span class="line"></span><br><span class="line">(<span class="name">defun</span> align (<span class="name">x</span>)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">      x</span><br><span class="line">      (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">          (<span class="name">cons</span> (<span class="name">car</span> x) (<span class="name">align</span> (<span class="name">cdr</span> x)))</span><br><span class="line">          (<span class="name">align</span> (<span class="name">rotate</span> x)))))</span><br><span class="line"></span><br><span class="line">(<span class="name">size</span> x) ??</span><br></pre></td></tr></table></figure>
<p>align的長度都一樣，需要別的measure</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> wt (<span class="name">x</span>)</span><br><span class="line">  (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">      &#x27;<span class="number">1</span></span><br><span class="line">      (<span class="name">+</span> (<span class="name">+</span> (<span class="name">wt</span> (<span class="name">car</span> x)) (<span class="name">wt</span> (<span class="name">car</span> x)))</span><br><span class="line">          (<span class="name">wt</span> (<span class="name">cdr</span> x)))))</span><br><span class="line"></span><br><span class="line">measure: (<span class="name">size</span> x)</span><br></pre></td></tr></table></figure>
<p>totality claim是</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">natp</span> (<span class="name">wt</span> x))</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        &#x27;t</span><br><span class="line">        (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">            (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">cdr</span> x)) (<span class="name">wt</span> x))</span><br><span class="line">            (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">rotate</span> x)) (<span class="name">wt</span> x))))</span><br><span class="line">    &#x27;nil)</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> natp/wt (<span class="name">x</span>)</span><br><span class="line">     (<span class="name">equal</span> (<span class="name">natp</span> (<span class="name">wt</span> x)) &#x27;t))</span><br></pre></td></tr></table></figure>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">natp</span> (<span class="name">size</span> x))</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        &#x27;t</span><br><span class="line">        (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">            (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">cdr</span> x)) (<span class="name">wt</span> x))</span><br><span class="line">            (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">rotate</span> x)) (<span class="name">wt</span> x))))</span><br><span class="line">    &#x27;nil)</span><br></pre></td></tr></table></figure>
<p>=&gt; natp/wt</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">        (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">cdr</span> x)) (<span class="name">wt</span> x))</span><br><span class="line">        (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">rotate</span> x)) (<span class="name">wt</span> x))))</span><br></pre></td></tr></table></figure>
<p>=&gt; wt</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">        (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">cdr</span> x)) (<span class="name">+</span> (<span class="name">+</span> (<span class="name">wt</span> (<span class="name">car</span> x)) (<span class="name">wt</span> (<span class="name">car</span> x))) (<span class="name">wt</span> (<span class="name">cdr</span> x))))</span><br><span class="line">        (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">rotate</span> x)) (<span class="name">wt</span> x))))</span><br></pre></td></tr></table></figure>
<p>=&gt; if-true, natp/wt</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">        (<span class="name">if</span> (<span class="name">natp</span> (<span class="name">wt</span> (<span class="name">cdr</span> x)))</span><br><span class="line">            (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">cdr</span> x)) (<span class="name">+</span> (<span class="name">+</span> (<span class="name">wt</span> (<span class="name">car</span> x)) (<span class="name">wt</span> (<span class="name">car</span> x))) (<span class="name">wt</span> (<span class="name">cdr</span> x))))</span><br><span class="line">            <span class="literal">t</span>)</span><br><span class="line">        (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">rotate</span> x)) (<span class="name">wt</span> x))))</span><br></pre></td></tr></table></figure>
<p>=&gt; identity-+, common-addends-&lt;</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">        (<span class="name">if</span> (<span class="name">natp</span> (<span class="name">wt</span> (<span class="name">cdr</span> x)))</span><br><span class="line">            (<span class="name">&lt;</span> <span class="number">0</span> (<span class="name">+</span> (<span class="name">wt</span> (<span class="name">car</span> x)) (<span class="name">wt</span> (<span class="name">car</span> x)))))</span><br><span class="line">            <span class="literal">t</span>)</span><br><span class="line">        (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">rotate</span> x)) (<span class="name">wt</span> x))))</span><br></pre></td></tr></table></figure>
<p>=&gt; change promise (natp (wt (cdr x))) -&gt; t -&gt; (equal (&lt; ‘0 (wt x))) t)</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    &#x27;t</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">        (<span class="name">if</span> (<span class="name">&lt;</span> ‘<span class="number">0</span> (<span class="name">wt</span> (<span class="name">car</span> x))))</span><br><span class="line">            (<span class="name">&lt;</span> <span class="number">0</span> (<span class="name">+</span> (<span class="name">wt</span> (<span class="name">car</span> x)) (<span class="name">wt</span> (<span class="name">car</span> x)))))</span><br><span class="line">            <span class="literal">t</span>)</span><br><span class="line">        (<span class="name">&lt;</span> (<span class="name">wt</span> (<span class="name">rotate</span> x)) (<span class="name">wt</span> x))))</span><br></pre></td></tr></table></figure>
<p>=&gt; positive-+</p>
<p>(e04, 後面的很長，pass)</p>
<p>最後還有一個align/align，但就是之前的綜合體，不過歸納template要自己生，至於證明就不展開了太長了!!</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">defun</span> align (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">        x</span><br><span class="line">        (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">            (<span class="name">cons</span> (<span class="name">car</span> x) (<span class="name">align</span> (<span class="name">cdr</span> x)))</span><br><span class="line">            (<span class="name">align</span> (<span class="name">rotate</span> x)))))</span><br><span class="line"></span><br><span class="line">(<span class="name">dethm</span> align/align (<span class="name">x</span>)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">align</span> (<span class="name">align</span> x)) (<span class="name">align</span> x)))</span><br><span class="line"></span><br><span class="line">(<span class="name">if</span> (<span class="name">atom</span> x)</span><br><span class="line">    (<span class="name">equal</span> (<span class="name">align</span> (<span class="name">align</span> x)) (<span class="name">align</span> x))</span><br><span class="line">    (<span class="name">if</span> (<span class="name">atom</span> (<span class="name">car</span> x))</span><br><span class="line">        (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">align</span> (<span class="name">align</span> (<span class="name">cdr</span> x))) (<span class="name">align</span> (<span class="name">cdr</span> x)))</span><br><span class="line">            (<span class="name">equal</span> (<span class="name">align</span> (<span class="name">align</span> x)) (<span class="name">align</span> x)) &#x27;t)</span><br><span class="line">        (<span class="name">if</span> (<span class="name">equal</span> (<span class="name">align</span> (<span class="name">align</span> (<span class="name">rotate</span> x))) (<span class="name">align</span> (<span class="name">rotate</span> x)))</span><br><span class="line">            (<span class="name">equal</span> (<span class="name">align</span> (<span class="name">align</span> x)) (<span class="name">align</span> x))</span><br><span class="line">            &#x27;t)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="J-Bob">J-Bob</h2>
<p>TODO</p>
<p>有時間會補!!</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/07/kmp-algorithm/" rel="prev" title="kmp-algorithm">
      <i class="fa fa-chevron-left"></i> kmp-algorithm
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/07/leetcode-1/" rel="next" title="leetcode-1 - Two Sum">
      leetcode-1 - Two Sum <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8B%95%E6%A9%9F-659"><span class="nav-number">1.</span> <span class="nav-text">動機</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#keyword"><span class="nav-number">2.</span> <span class="nav-text">keyword</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#axioms"><span class="nav-number">3.</span> <span class="nav-text">axioms</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%8E%E9%BA%BC%E7%94%A8theorem"><span class="nav-number">4.</span> <span class="nav-text">怎麼用theorem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A6%81total%E6%89%8D%E8%A1%8C%EF%BC%8Cpartial-function"><span class="nav-number">5.</span> <span class="nav-text">要total才行，partial function</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#measure"><span class="nav-number">6.</span> <span class="nav-text">measure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#If-Lifting"><span class="nav-number">7.</span> <span class="nav-text">If Lifting</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%81%9ATotality-Claims"><span class="nav-number">8.</span> <span class="nav-text">做Totality Claims</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%81%9Ainduction-template"><span class="nav-number">9.</span> <span class="nav-text">做induction template</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Proof-by-List-Induction"><span class="nav-number">9.1.</span> <span class="nav-text">Proof by List Induction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Proof-by-Star-Induction"><span class="nav-number">9.2.</span> <span class="nav-text">Proof by Star Induction</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Insights"><span class="nav-number">10.</span> <span class="nav-text">Insights</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%B8%E5%A5%BD%E5%81%9A%E7%9A%84"><span class="nav-number">10.1.</span> <span class="nav-text">選好做的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insight-Rewrite-from-the-Inside-Out"><span class="nav-number">10.2.</span> <span class="nav-text">Insight: Rewrite from the Inside Out</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insight-Pull-Ifs-Outward"><span class="nav-number">10.3.</span> <span class="nav-text">Insight: Pull Ifs Outward</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insight-Keep-Theorems-in-Mind"><span class="nav-number">10.4.</span> <span class="nav-text">Insight: Keep Theorems in Mind</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insight-Don%E2%80%99t-Touch-Inductive-Premises"><span class="nav-number">10.5.</span> <span class="nav-text">Insight: Don’t Touch Inductive Premises</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insight-Combine-Ifs"><span class="nav-number">10.6.</span> <span class="nav-text">Insight: Combine Ifs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insight-Create-Helpers-for-Induction"><span class="nav-number">10.7.</span> <span class="nav-text">Insight: Create Helpers for Induction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insight-Create-Helpers-for-Repetition"><span class="nav-number">10.8.</span> <span class="nav-text">Insight: Create Helpers for Repetition</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#proof-for-memb-remb"><span class="nav-number">11.</span> <span class="nav-text">proof for memb?&#x2F;remb</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#proof-for-ctx-sub"><span class="nav-number">12.</span> <span class="nav-text">proof for ctx?&#x2F;sub</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#proof-for-set-add-atoms"><span class="nav-number">13.</span> <span class="nav-text">proof for set?&#x2F;add-atoms</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ch10-different-measure-change-the-promise"><span class="nav-number">14.</span> <span class="nav-text">Ch10 different measure &amp; change the promise</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#J-Bob"><span class="nav-number">15.</span> <span class="nav-text">J-Bob</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zhengcf</p>
  <div class="site-description" itemprop="description">想到什麼就寫什麼</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">695</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">64</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhengcf</span>
</div>
  <div class="powered-by">Powered by <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl theme-link" data-url="aHR0cHM6Ly9tdXNlLnRoZW1lLW5leHQub3Jn">NexT.Muse</span>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 1000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://littlebees.github.io/2021/07/the-little-prover-note/',]
      });
      });
  </script>

</body>
</html>
