<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>leetcode-212 - Word Search II | 記事本</title>
<meta name=keywords content="Matrix,Trie,Backtracking,String,Array,Blind Curated 75,Top Interview Questions,seanprashad"><meta name=description content="動機
原來lru_cache搭配dfs可以達到判有沒有visited的效果!!"><meta name=author content="zhengcf"><link rel=canonical href=https://littlebees.github.io/2021/01/leetcode-212-word-search-ii/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://littlebees.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://littlebees.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://littlebees.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://littlebees.github.io/apple-touch-icon.png><link rel=mask-icon href=https://littlebees.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://littlebees.github.io/2021/01/leetcode-212-word-search-ii/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="leetcode-212 - Word Search II"><meta property="og:description" content="動機
原來lru_cache搭配dfs可以達到判有沒有visited的效果!!"><meta property="og:type" content="article"><meta property="og:url" content="https://littlebees.github.io/2021/01/leetcode-212-word-search-ii/"><meta property="og:image" content="https://littlebees.github.io/images/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-01-30T19:09:52+00:00"><meta property="article:modified_time" content="2021-01-30T19:09:52+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://littlebees.github.io/images/papermod-cover.png"><meta name=twitter:title content="leetcode-212 - Word Search II"><meta name=twitter:description content="動機
原來lru_cache搭配dfs可以達到判有沒有visited的效果!!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://littlebees.github.io/posts/"},{"@type":"ListItem","position":2,"name":"leetcode-212 - Word Search II","item":"https://littlebees.github.io/2021/01/leetcode-212-word-search-ii/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"leetcode-212 - Word Search II","name":"leetcode-212 - Word Search II","description":"動機 原來lru_cache搭配dfs可以達到判有沒有visited的效果!!\n","keywords":["Matrix","Trie","Backtracking","String","Array","Blind Curated 75","Top Interview Questions","seanprashad"],"articleBody":"動機 原來lru_cache搭配dfs可以達到判有沒有visited的效果!!\nProblem Given an m x n board of characters and a list of strings words, return all words on the board.\nEach word must be constructed from letters of sequentially adjacent cells, where adjacent cells are horizontally or vertically neighboring. The same letter cell may not be used more than once in a word.\nExample 1:\nInput: board = [[o,a,a,n],[e,t,a,e],[i,h,k,r],[i,f,l,v]], words = [oath,pea,eat,rain]Output: [eat,oath]Example 2:\nInput: board = [[a,b],[c,d]], words = [abcb]Output: [] Constraints:\nm == board.lengthn == board[i].length1 \u003c= m, n \u003c= 12board[i][j] is a lowercase English letter.1 \u003c= words.length \u003c= 3 * 1041 \u003c= words[i].length \u003c= 10words[i] consists of lowercase English letters.All the strings of words are unique. Sol 都是dfs+trie去看有沒有單字，不過要注意的是像[app,apple]不能在看到app就停下來\nclass Solution: def buildTrie(self): self.trie = [None, {}] for (i,w) in enumerate(self.ws): tmp = self.trie for c in w: if c not in tmp[1]: tmp[1][c] = [None, {}] tmp = tmp[1][c] tmp[0] = i def hasChar(self,trie,c): if c in trie[1]: return trie[1][c] else: return [None, {}] def dfs(self,i,j, trie, pos): if i \u003c 0 or i \u003e= len(self.b) or j \u003c 0 or j \u003e= len(self.b[0]): return [] else: trie2 = self.hasChar(trie,self.b[i][j]) ret = [] if trie2[0] is None else [self.ws[trie2[0]]] if trie2[1]: dirs = [x for x in [(i+1,j),(i-1,j),(i,j+1),(i,j-1)] if x not in pos] for p in dirs: ret += self.dfs(p[0],p[1],trie2,pos+[p]) return ret def findWords(self, board: List[List[str]], ws: List[str]) -\u003e List[str]: self.ws = ws self.buildTrie() #print(self.trie) self.b = board ret = [] for i in range(len(board)): for j in range(len(board[0])): ret += self.dfs(i,j,self.trie,[(i,j)]) return list(set(ret)) Sol2: lru_cache與標記來標visited 為了避免找重複\n(ret): 改trie來看有沒有看過這個單字 (dfs的表): 走過的路就mark掉 backtracking常用技巧: 走過的路就mark掉，其實與改trie一樣 (列舉點): lru_cache避免dfs再走一次 class TrieNode: def __init__(self): self.children = defaultdict(TrieNode) self.isWord = False class Trie: def __init__(self): self.root = TrieNode() def add(self, word): node = self.root for letter in word: node = node.children[letter] node.isWord = True class Solution: def buildTrie(self): for word in self.ws: self.trie.add(word) @lru_cache(None) def dfs(self,i,j, trie,cur): if trie.isWord: self.ret.append(cur) trie.isWord = False if 0 \u003c= i \u003c len(self.b) and 0 \u003c= j \u003c len(self.b[0]): if self.b[i][j] != '#': dirs = [(0, 1), (1, 0), (0, -1), (-1, 0)] now = self.b[i][j] tmpTrie = trie.children.get(now) if tmpTrie: tmpCur = cur+now self.b[i][j] = '#' for (x,y) in dirs: self.dfs(i+x,j+y,tmpTrie,tmpCur) self.b[i][j] = now def findWords(self, board: List[List[str]], ws: List[str]) -\u003e List[str]: self.ws = ws self.trie = Trie() self.buildTrie() #print(self.trie) self.b = board self.ret = [] for i in range(len(board)): for j in range(len(board[0])): self.dfs(i,j,self.trie.root,\"\") return self.ret ","wordCount":"394","inLanguage":"en","image":"https://littlebees.github.io/images/papermod-cover.png","datePublished":"2021-01-30T19:09:52Z","dateModified":"2021-01-30T19:09:52Z","author":{"@type":"Person","name":"zhengcf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://littlebees.github.io/2021/01/leetcode-212-word-search-ii/"},"publisher":{"@type":"Organization","name":"記事本","logo":{"@type":"ImageObject","url":"https://littlebees.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://littlebees.github.io/ accesskey=h title="記事本 (Alt + H)">記事本</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://littlebees.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://littlebees.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://littlebees.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://littlebees.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://littlebees.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">leetcode-212 - Word Search II</h1><div class=post-meta><span title='2021-01-30 19:09:52 +0000 UTC'>January 30, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;zhengcf</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%8b%95%e6%a9%9f aria-label=動機>動機</a></li><li><a href=#problem aria-label=Problem>Problem</a></li><li><a href=#sol aria-label=Sol>Sol</a></li><li><a href=#sol2-lru_cache%e8%88%87%e6%a8%99%e8%a8%98%e4%be%86%e6%a8%99visited aria-label="Sol2: lru_cache與標記來標visited">Sol2: lru_cache與標記來標visited</a></li></ul></div></details></div><div class=post-content><h2 id=動機>動機<a hidden class=anchor aria-hidden=true href=#動機>#</a></h2><p>原來lru_cache搭配dfs可以達到判有沒有visited的效果!!</p><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>#</a></h2><p>Given an <code>m x n</code> <code>board</code> of characters and a list of strings <code>words</code>, return <em>all words on the board</em>.</p><p>Each word must be constructed from letters of sequentially adjacent cells, where <strong>adjacent cells</strong> are horizontally or vertically neighboring. The same letter cell may not be used more than once in a word.</p><p> </p><p><strong>Example 1:</strong></p><img alt src=https://assets.leetcode.com/uploads/2020/11/07/search1.jpg style=width:322px;height:322px><pre><strong>Input:</strong> board = [[o,a,a,n],[e,t,a,e],[i,h,k,r],[i,f,l,v]], words = [oath,pea,eat,rain]<strong>Output:</strong> [eat,oath]</pre><p><strong>Example 2:</strong></p><img alt src=https://assets.leetcode.com/uploads/2020/11/07/search2.jpg style=width:162px;height:162px><pre><strong>Input:</strong> board = [[a,b],[c,d]], words = [abcb]<strong>Output:</strong> []</pre><p> </p><p><strong>Constraints:</strong></p><ul><li><code>m == board.length</code></li><li><code>n == board[i].length</code></li><li><code>1 <= m, n <= 12</code></li><li><code>board[i][j]</code> is a lowercase English letter.</li><li><code>1 <= words.length <= 3 * 10<sup>4</sup></code></li><li><code>1 <= words[i].length <= 10</code></li><li><code>words[i]</code> consists of lowercase English letters.</li><li>All the strings of <code>words</code> are unique.</li></ul><h2 id=sol>Sol<a hidden class=anchor aria-hidden=true href=#sol>#</a></h2><p>都是dfs+trie去看有沒有單字，不過要注意的是像<code>[app,apple]</code>不能在看到app就停下來</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>buildTrie</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>trie</span> <span class=o>=</span> <span class=p>[</span><span class=kc>None</span><span class=p>,</span> <span class=p>{}]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>w</span><span class=p>)</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>ws</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>tmp</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>trie</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>w</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>c</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>tmp</span><span class=p>[</span><span class=mi>1</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                    <span class=n>tmp</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>c</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=kc>None</span><span class=p>,</span> <span class=p>{}]</span>
</span></span><span class=line><span class=cl>                <span class=n>tmp</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>c</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>tmp</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>hasChar</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>trie</span><span class=p>,</span><span class=n>c</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>trie</span><span class=p>[</span><span class=mi>1</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>trie</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>c</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>[</span><span class=kc>None</span><span class=p>,</span> <span class=p>{}]</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>dfs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span> <span class=n>trie</span><span class=p>,</span> <span class=n>pos</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=ow>or</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>)</span> <span class=ow>or</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=ow>or</span> <span class=n>j</span> <span class=o>&gt;=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>[</span><span class=mi>0</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>trie2</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>hasChar</span><span class=p>(</span><span class=n>trie</span><span class=p>,</span><span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=n>ret</span> <span class=o>=</span> <span class=p>[]</span> <span class=k>if</span> <span class=n>trie2</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>ws</span><span class=p>[</span><span class=n>trie2</span><span class=p>[</span><span class=mi>0</span><span class=p>]]]</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>trie2</span><span class=p>[</span><span class=mi>1</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>dirs</span> <span class=o>=</span> <span class=p>[</span><span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=p>[(</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=p>),(</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=p>),(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=p>),(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=mi>1</span><span class=p>)]</span> <span class=k>if</span> <span class=n>x</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>pos</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>dirs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>ret</span> <span class=o>+=</span> <span class=bp>self</span><span class=o>.</span><span class=n>dfs</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span><span class=n>p</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span><span class=n>trie2</span><span class=p>,</span><span class=n>pos</span><span class=o>+</span><span class=p>[</span><span class=n>p</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>ret</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>findWords</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>board</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]],</span> <span class=n>ws</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>ws</span> <span class=o>=</span> <span class=n>ws</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>buildTrie</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=c1>#print(self.trie)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>b</span> <span class=o>=</span> <span class=n>board</span>
</span></span><span class=line><span class=cl>        <span class=n>ret</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>board</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>board</span><span class=p>[</span><span class=mi>0</span><span class=p>])):</span>
</span></span><span class=line><span class=cl>                <span class=n>ret</span> <span class=o>+=</span> <span class=bp>self</span><span class=o>.</span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=bp>self</span><span class=o>.</span><span class=n>trie</span><span class=p>,[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>)])</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>ret</span><span class=p>))</span>
</span></span></code></pre></div><h2 id=sol2-lru_cache與標記來標visited>Sol2: lru_cache與標記來標visited<a hidden class=anchor aria-hidden=true href=#sol2-lru_cache與標記來標visited>#</a></h2><p>為了避免找重複</p><ul><li>(ret): 改trie來看有沒有看過這個單字</li><li>(dfs的表): 走過的路就mark掉<ul><li>backtracking常用技巧: 走過的路就mark掉，其實與改trie一樣</li></ul></li><li>(列舉點): lru_cache避免dfs再走一次</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>TrieNode</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>children</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=n>TrieNode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>isWord</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Trie</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>root</span> <span class=o>=</span> <span class=n>TrieNode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>word</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>root</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>letter</span> <span class=ow>in</span> <span class=n>word</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>node</span> <span class=o>=</span> <span class=n>node</span><span class=o>.</span><span class=n>children</span><span class=p>[</span><span class=n>letter</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span><span class=o>.</span><span class=n>isWord</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>buildTrie</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>word</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>ws</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>trie</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>word</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@lru_cache</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>dfs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span> <span class=n>trie</span><span class=p>,</span><span class=n>cur</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>trie</span><span class=o>.</span><span class=n>isWord</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>ret</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>cur</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>trie</span><span class=o>.</span><span class=n>isWord</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=mi>0</span> <span class=o>&lt;=</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>)</span> <span class=ow>and</span> <span class=mi>0</span> <span class=o>&lt;=</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>[</span><span class=mi>0</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=s1>&#39;#&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>dirs</span> <span class=o>=</span> <span class=p>[(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>),</span> <span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>                <span class=n>now</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>tmpTrie</span> <span class=o>=</span> <span class=n>trie</span><span class=o>.</span><span class=n>children</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>now</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>tmpTrie</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>tmpCur</span> <span class=o>=</span> <span class=n>cur</span><span class=o>+</span><span class=n>now</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;#&#39;</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>)</span> <span class=ow>in</span> <span class=n>dirs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=bp>self</span><span class=o>.</span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=o>+</span><span class=n>x</span><span class=p>,</span><span class=n>j</span><span class=o>+</span><span class=n>y</span><span class=p>,</span><span class=n>tmpTrie</span><span class=p>,</span><span class=n>tmpCur</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>now</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>findWords</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>board</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]],</span> <span class=n>ws</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>ws</span> <span class=o>=</span> <span class=n>ws</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>trie</span> <span class=o>=</span> <span class=n>Trie</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>buildTrie</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=c1>#print(self.trie)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>b</span> <span class=o>=</span> <span class=n>board</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>ret</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>board</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>board</span><span class=p>[</span><span class=mi>0</span><span class=p>])):</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=bp>self</span><span class=o>.</span><span class=n>trie</span><span class=o>.</span><span class=n>root</span><span class=p>,</span><span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>ret</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://littlebees.github.io/tags/matrix/>Matrix</a></li><li><a href=https://littlebees.github.io/tags/trie/>Trie</a></li><li><a href=https://littlebees.github.io/tags/backtracking/>Backtracking</a></li><li><a href=https://littlebees.github.io/tags/string/>String</a></li><li><a href=https://littlebees.github.io/tags/array/>Array</a></li><li><a href=https://littlebees.github.io/tags/blind-curated-75/>Blind Curated 75</a></li><li><a href=https://littlebees.github.io/tags/top-interview-questions/>Top Interview Questions</a></li><li><a href=https://littlebees.github.io/tags/seanprashad/>Seanprashad</a></li></ul><nav class=paginav><a class=prev href=https://littlebees.github.io/2021/01/leetcode-166-fraction-to-recurring-decimal/><span class=title>« Prev</span><br><span>leetcode-166 - Fraction to Recurring Decimal</span>
</a><a class=next href=https://littlebees.github.io/2021/01/leetcode-239-sliding-window-maximum/><span class=title>Next »</span><br><span>leetcode-239 - Sliding Window Maximum</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://littlebees.github.io/>記事本</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>