<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>leetcode-546 - Remove Boxes | 記事本</title>
<meta name=keywords content="Memoization,Dynamic Programming,Array"><meta name=description content="動機
三維dp!?
這真的能在45分做出來?"><meta name=author content="zhengcf"><link rel=canonical href=https://littlebees.github.io/2021/08/leetcode-546-remove-boxes/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://littlebees.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://littlebees.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://littlebees.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://littlebees.github.io/apple-touch-icon.png><link rel=mask-icon href=https://littlebees.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="leetcode-546 - Remove Boxes"><meta property="og:description" content="動機
三維dp!?
這真的能在45分做出來?"><meta property="og:type" content="article"><meta property="og:url" content="https://littlebees.github.io/2021/08/leetcode-546-remove-boxes/"><meta property="og:image" content="https://littlebees.github.io/images/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-15T15:02:32+00:00"><meta property="article:modified_time" content="2021-08-15T15:02:32+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://littlebees.github.io/images/papermod-cover.png"><meta name=twitter:title content="leetcode-546 - Remove Boxes"><meta name=twitter:description content="動機
三維dp!?
這真的能在45分做出來?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://littlebees.github.io/posts/"},{"@type":"ListItem","position":2,"name":"leetcode-546 - Remove Boxes","item":"https://littlebees.github.io/2021/08/leetcode-546-remove-boxes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"leetcode-546 - Remove Boxes","name":"leetcode-546 - Remove Boxes","description":"動機 三維dp!? 這真的能在45分做出來?\n","keywords":["Memoization","Dynamic Programming","Array"],"articleBody":"動機 三維dp!? 這真的能在45分做出來?\nProblem You are given several boxes with different colors represented by different positive numbers.\nYou may experience several rounds to remove boxes until there is no box left. Each time you can choose some continuous boxes with the same color (i.e., composed of k boxes, k \u003e= 1), remove them and get k * k points.\nReturn the maximum points you can get.\nExample 1:\nInput: boxes = [1,3,2,2,2,3,4,3,1]Output: 23Explanation:[1, 3, 2, 2, 2, 3, 4, 3, 1] ----\u003e [1, 3, 3, 4, 3, 1] (3*3=9 points) ----\u003e [1, 3, 3, 3, 1] (1*1=1 points) ----\u003e [1, 1] (3*3=9 points) ----\u003e [] (2*2=4 points)Example 2:\nInput: boxes = [1,1,1]Output: 9Example 3:\nInput: boxes = [1]Output: 1 Constraints:\n1 \u003c= boxes.length \u003c= 1001 \u003c= boxes[i] \u003c= 100 Sol dp去模擬移除箱子的過程，dp(i,j)是範圍中的最大分數，k是與j的顏色相同的箱子個數\n之後就是兩個case\n把累績到現在的盒子花掉 累積箱子 BACAA: dp(0,4,0) BA|AA: dp(0,1,2) B|AAA: dp(0,1,3)\n想從dp(0,4,0)變成dp(0,1,3) BACA|A: dp(0,3,1)+dp(4,3,0) BAC|AA:dp(0,2,2)+dp(3,4,0) B|AAA: dp(0,1,3)+...\nclass Solution: def removeBoxes(self, boxes: List[int]) -\u003e int: @cache def dp(i,j,k): if i \u003e j: return 0 else: ret = dp(i,j-1,0)+(k+1)**2 divs = [dp(i,x,k+1)+dp(x+1,j-1,0) for x in range(i,j) if boxes[x] == boxes[j]] return max(ret,max(divs,default=0)) return dp(0,len(boxes)-1,0) ","wordCount":"182","inLanguage":"en","datePublished":"2021-08-15T15:02:32Z","dateModified":"2021-08-15T15:02:32Z","author":{"@type":"Person","name":"zhengcf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://littlebees.github.io/2021/08/leetcode-546-remove-boxes/"},"publisher":{"@type":"Organization","name":"記事本","logo":{"@type":"ImageObject","url":"https://littlebees.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://littlebees.github.io/ accesskey=h title="記事本 (Alt + H)">記事本</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://littlebees.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://littlebees.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://littlebees.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://littlebees.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://littlebees.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">leetcode-546 - Remove Boxes</h1><div class=post-meta><span title='2021-08-15 15:02:32 +0000 UTC'>August 15, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;zhengcf</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%8b%95%e6%a9%9f aria-label=動機>動機</a></li><li><a href=#problem aria-label=Problem>Problem</a></li><li><a href=#sol aria-label=Sol>Sol</a></li></ul></div></details></div><div class=post-content><h2 id=動機>動機<a hidden class=anchor aria-hidden=true href=#動機>#</a></h2><p>三維dp!?
這真的能在45分做出來?</p><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>#</a></h2><p>You are given several <code>boxes</code> with different colors represented by different positive numbers.</p><p>You may experience several rounds to remove boxes until there is no box left. Each time you can choose some continuous boxes with the same color (i.e., composed of <code>k</code> boxes, <code>k >= 1</code>), remove them and get <code>k * k</code> points.</p><p>Return <em>the maximum points you can get</em>.</p><p> </p><p><strong>Example 1:</strong></p><pre><strong>Input:</strong> boxes = [1,3,2,2,2,3,4,3,1]<strong>Output:</strong> 23<strong>Explanation:</strong>[1, 3, 2, 2, 2, 3, 4, 3, 1] ----> [1, 3, 3, 4, 3, 1] (3*3=9 points) ----> [1, 3, 3, 3, 1] (1*1=1 points) ----> [1, 1] (3*3=9 points) ----> [] (2*2=4 points)</pre><p><strong>Example 2:</strong></p><pre><strong>Input:</strong> boxes = [1,1,1]<strong>Output:</strong> 9</pre><p><strong>Example 3:</strong></p><pre><strong>Input:</strong> boxes = [1]<strong>Output:</strong> 1</pre><p> </p><p><strong>Constraints:</strong></p><ul><li><code>1 <= boxes.length <= 100</code></li><li><code>1 <= boxes[i] <= 100</code></li></ul><h2 id=sol>Sol<a hidden class=anchor aria-hidden=true href=#sol>#</a></h2><p>dp去模擬移除箱子的過程，dp(i,j)是範圍中的最大分數，k是與j的顏色相同的箱子個數</p><p>之後就是兩個case</p><ul><li>把累績到現在的盒子花掉</li><li>累積箱子</li></ul><p><code>BACAA</code>: <code>dp(0,4,0)</code>
<code>BA|AA</code>: <code>dp(0,1,2)</code>
<code>B|AAA</code>: <code>dp(0,1,3)</code></p><p>想從<code>dp(0,4,0)</code>變成<code>dp(0,1,3)</code>
<code>BACA|A</code>: <code>dp(0,3,1)+dp(4,3,0)</code>
<code>BAC|AA</code>:<code>dp(0,2,2)+dp(3,4,0)</code>
<code>B|AAA</code>: <code>dp(0,1,3)+...</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>removeBoxes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>boxes</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nd>@cache</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>dp</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>,</span><span class=n>k</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>&gt;</span> <span class=n>j</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>ret</span> <span class=o>=</span> <span class=n>dp</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span><span class=o>+</span><span class=p>(</span><span class=n>k</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>                <span class=n>divs</span> <span class=o>=</span> <span class=p>[</span><span class=n>dp</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>x</span><span class=p>,</span><span class=n>k</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span><span class=o>+</span><span class=n>dp</span><span class=p>(</span><span class=n>x</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>)</span> <span class=k>if</span> <span class=n>boxes</span><span class=p>[</span><span class=n>x</span><span class=p>]</span> <span class=o>==</span> <span class=n>boxes</span><span class=p>[</span><span class=n>j</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nb>max</span><span class=p>(</span><span class=n>ret</span><span class=p>,</span><span class=nb>max</span><span class=p>(</span><span class=n>divs</span><span class=p>,</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>dp</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>boxes</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://littlebees.github.io/tags/memoization/>Memoization</a></li><li><a href=https://littlebees.github.io/tags/dynamic-programming/>Dynamic Programming</a></li><li><a href=https://littlebees.github.io/tags/array/>Array</a></li></ul><nav class=paginav><a class=prev href=https://littlebees.github.io/2021/08/leetcode-992-subarrays-with-k-different-integers/><span class=title>« Prev</span><br><span>leetcode-992 - Subarrays with K Different Integers</span>
</a><a class=next href=https://littlebees.github.io/2021/08/leetcode-862-shortest-subarray-with-sum-at-least-k/><span class=title>Next »</span><br><span>leetcode-862 - Shortest Subarray with Sum at Least K</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://littlebees.github.io/>記事本</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>