<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>leetcode-417 - Pacific Atlantic Water Flow | 記事本</title>
<meta name=keywords content="Matrix,Breadth-First Search,Depth-First Search,Array,Blind Curated 75,seanprashad"><meta name=description content="動機
要用dfs(+dp)要注意會不會重複走"><meta name=author content="zhengcf"><link rel=canonical href=https://littlebees.github.io/2021/07/leetcode-417-pacific-atlantic-water-flow/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://littlebees.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://littlebees.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://littlebees.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://littlebees.github.io/apple-touch-icon.png><link rel=mask-icon href=https://littlebees.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="leetcode-417 - Pacific Atlantic Water Flow"><meta property="og:description" content="動機
要用dfs(+dp)要注意會不會重複走"><meta property="og:type" content="article"><meta property="og:url" content="https://littlebees.github.io/2021/07/leetcode-417-pacific-atlantic-water-flow/"><meta property="og:image" content="https://littlebees.github.io/images/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-22T21:11:44+00:00"><meta property="article:modified_time" content="2021-07-22T21:11:44+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://littlebees.github.io/images/papermod-cover.png"><meta name=twitter:title content="leetcode-417 - Pacific Atlantic Water Flow"><meta name=twitter:description content="動機
要用dfs(+dp)要注意會不會重複走"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://littlebees.github.io/posts/"},{"@type":"ListItem","position":2,"name":"leetcode-417 - Pacific Atlantic Water Flow","item":"https://littlebees.github.io/2021/07/leetcode-417-pacific-atlantic-water-flow/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"leetcode-417 - Pacific Atlantic Water Flow","name":"leetcode-417 - Pacific Atlantic Water Flow","description":"動機 要用dfs(+dp)要注意會不會重複走\n","keywords":["Matrix","Breadth-First Search","Depth-First Search","Array","Blind Curated 75","seanprashad"],"articleBody":"動機 要用dfs(+dp)要注意會不會重複走\nProblem There is an m x n rectangular island that borders both the Pacific Ocean and Atlantic Ocean. The Pacific Ocean touches the island's left and top edges, and the Atlantic Ocean touches the island's right and bottom edges.\nThe island is partitioned into a grid of square cells. You are given an m x n integer matrix heights where heights[r][c] represents the height above sea level of the cell at coordinate (r, c).\nThe island receives a lot of rain, and the rain water can flow to neighboring cells directly north, south, east, and west if the neighboring cell's height is less than or equal to the current cell's height. Water can flow from any cell adjacent to an ocean into the ocean.\nReturn a 2D list of grid coordinates result where result[i] = [ri, ci] denotes that rain water can flow from cell (ri, ci) to both the Pacific and Atlantic oceans.\nExample 1:\nInput: heights = [[1,2,2,3,5],[3,2,3,4,4],[2,4,5,3,1],[6,7,1,4,5],[5,1,1,2,4]]Output: [[0,4],[1,3],[1,4],[2,2],[3,0],[3,1],[4,0]]Example 2:\nInput: heights = [[2,1],[1,2]]Output: [[0,0],[0,1],[1,0],[1,1]] Constraints:\nm == heights.lengthn == heights[r].length1 \u003c= m, n \u003c= 2000 \u003c= heights[r][c] \u003c= 105 Sol 當初腦袋撞到，一直想用dp去做，但不是不能用dp做，不過用記憶法不好做 要\n因為要處理重複走的問題\n如果dfs不行，我們還有bfs!!\nclass Solution: # 如果要用dfs(+dp)要注意會不會重複走，如果會就很麻煩 # 同樣是搜尋所有可能性可以用bfs，尤其是起點或終點已經確定的更是如此 def pacificAtlantic(self, hs: List[List[int]]) -\u003e List[List[int]]: def legal(x,y): return 0 \u003c= x \u003c len(hs) and 0 \u003c= y \u003c len(hs[x]) def bfs(starts): q,vis = deque(starts),set(starts) while q: (i,j) = q.popleft() dirs = [(i+1,j),(i,j+1),(i-1,j),(i,j-1)] dirs = [(x,y) for (x,y) in dirs if legal(x,y) and (x,y) not in vis and hs[i][j] \u003c= hs[x][y]] for xy in dirs: q.append(xy) vis.add(xy) return vis if hs: p = [(0,j) for j in range(len(hs[0]))] + [(i,0) for i in range(len(hs))] a = [(len(hs)-1,j) for j in range(len(hs[0]))] + [(i,len(hs[i])-1) for i in range(len(hs))] return bfs(p) \u0026 bfs(a) else: return [] ","wordCount":"289","inLanguage":"en","datePublished":"2021-07-22T21:11:44Z","dateModified":"2021-07-22T21:11:44Z","author":{"@type":"Person","name":"zhengcf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://littlebees.github.io/2021/07/leetcode-417-pacific-atlantic-water-flow/"},"publisher":{"@type":"Organization","name":"記事本","logo":{"@type":"ImageObject","url":"https://littlebees.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://littlebees.github.io/ accesskey=h title="記事本 (Alt + H)">記事本</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://littlebees.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://littlebees.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://littlebees.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://littlebees.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://littlebees.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">leetcode-417 - Pacific Atlantic Water Flow</h1><div class=post-meta><span title='2021-07-22 21:11:44 +0000 UTC'>July 22, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;zhengcf</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%8b%95%e6%a9%9f aria-label=動機>動機</a></li><li><a href=#problem aria-label=Problem>Problem</a></li><li><a href=#sol aria-label=Sol>Sol</a></li></ul></div></details></div><div class=post-content><h2 id=動機>動機<a hidden class=anchor aria-hidden=true href=#動機>#</a></h2><p>要用dfs(+dp)要注意會不會重複走</p><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>#</a></h2><p>There is an <code>m x n</code> rectangular island that borders both the <strong>Pacific Ocean</strong> and <strong>Atlantic Ocean</strong>. The <strong>Pacific Ocean</strong> touches the island's left and top edges, and the <strong>Atlantic Ocean</strong> touches the island's right and bottom edges.</p><p>The island is partitioned into a grid of square cells. You are given an <code>m x n</code> integer matrix <code>heights</code> where <code>heights[r][c]</code> represents the <strong>height above sea level</strong> of the cell at coordinate <code>(r, c)</code>.</p><p>The island receives a lot of rain, and the rain water can flow to neighboring cells directly north, south, east, and west if the neighboring cell's height is <strong>less than or equal to</strong> the current cell's height. Water can flow from any cell adjacent to an ocean into the ocean.</p><p>Return <em>a <strong>2D list</strong> of grid coordinates </em><code>result</code><em> where </em><code>result[i] = [r<sub>i</sub>, c<sub>i</sub>]</code><em> denotes that rain water can flow from cell </em><code>(r<sub>i</sub>, c<sub>i</sub>)</code><em> to <strong>both</strong> the Pacific and Atlantic oceans</em>.</p><p> </p><p><strong>Example 1:</strong></p><img alt src=https://assets.leetcode.com/uploads/2021/06/08/waterflow-grid.jpg style=width:573px;height:573px><pre><strong>Input:</strong> heights = [[1,2,2,3,5],[3,2,3,4,4],[2,4,5,3,1],[6,7,1,4,5],[5,1,1,2,4]]<strong>Output:</strong> [[0,4],[1,3],[1,4],[2,2],[3,0],[3,1],[4,0]]</pre><p><strong>Example 2:</strong></p><pre><strong>Input:</strong> heights = [[2,1],[1,2]]<strong>Output:</strong> [[0,0],[0,1],[1,0],[1,1]]</pre><p> </p><p><strong>Constraints:</strong></p><ul><li><code>m == heights.length</code></li><li><code>n == heights[r].length</code></li><li><code>1 <= m, n <= 200</code></li><li><code>0 <= heights[r][c] <= 10<sup>5</sup></code></li></ul><h2 id=sol>Sol<a hidden class=anchor aria-hidden=true href=#sol>#</a></h2><p>當初腦袋撞到，一直想用dp去做，但不是不能用dp做，不過用記憶法不好做
要</p><p>因為要處理重複走的問題</p><p>如果dfs不行，我們還有bfs!!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># 如果要用dfs(+dp)要注意會不會重複走，如果會就很麻煩</span>
</span></span><span class=line><span class=cl>    <span class=c1># 同樣是搜尋所有可能性可以用bfs，尤其是起點或終點已經確定的更是如此</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>pacificAtlantic</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>hs</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>legal</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>0</span> <span class=o>&lt;=</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=n>hs</span><span class=p>)</span> <span class=ow>and</span> <span class=mi>0</span> <span class=o>&lt;=</span> <span class=n>y</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=n>hs</span><span class=p>[</span><span class=n>x</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>bfs</span><span class=p>(</span><span class=n>starts</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>q</span><span class=p>,</span><span class=n>vis</span> <span class=o>=</span> <span class=n>deque</span><span class=p>(</span><span class=n>starts</span><span class=p>),</span><span class=nb>set</span><span class=p>(</span><span class=n>starts</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=n>q</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>)</span> <span class=o>=</span> <span class=n>q</span><span class=o>.</span><span class=n>popleft</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>dirs</span> <span class=o>=</span> <span class=p>[(</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=p>),(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=o>+</span><span class=mi>1</span><span class=p>),(</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=p>),(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=o>-</span><span class=mi>1</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>                <span class=n>dirs</span> <span class=o>=</span> <span class=p>[(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>)</span> <span class=k>for</span> <span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>)</span> <span class=ow>in</span> <span class=n>dirs</span> <span class=k>if</span> <span class=n>legal</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>)</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>vis</span> <span class=ow>and</span> <span class=n>hs</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>hs</span><span class=p>[</span><span class=n>x</span><span class=p>][</span><span class=n>y</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>xy</span> <span class=ow>in</span> <span class=n>dirs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>q</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>xy</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>vis</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>xy</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>vis</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>hs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>p</span> <span class=o>=</span> <span class=p>[(</span><span class=mi>0</span><span class=p>,</span><span class=n>j</span><span class=p>)</span> <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>hs</span><span class=p>[</span><span class=mi>0</span><span class=p>]))]</span> <span class=o>+</span> <span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>hs</span><span class=p>))]</span>
</span></span><span class=line><span class=cl>            <span class=n>a</span> <span class=o>=</span> <span class=p>[(</span><span class=nb>len</span><span class=p>(</span><span class=n>hs</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=n>j</span><span class=p>)</span> <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>hs</span><span class=p>[</span><span class=mi>0</span><span class=p>]))]</span> <span class=o>+</span> <span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>hs</span><span class=p>[</span><span class=n>i</span><span class=p>])</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>hs</span><span class=p>))]</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>bfs</span><span class=p>(</span><span class=n>p</span><span class=p>)</span> <span class=o>&amp;</span> <span class=n>bfs</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>[]</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://littlebees.github.io/tags/matrix/>Matrix</a></li><li><a href=https://littlebees.github.io/tags/breadth-first-search/>Breadth-First Search</a></li><li><a href=https://littlebees.github.io/tags/depth-first-search/>Depth-First Search</a></li><li><a href=https://littlebees.github.io/tags/array/>Array</a></li><li><a href=https://littlebees.github.io/tags/blind-curated-75/>Blind Curated 75</a></li><li><a href=https://littlebees.github.io/tags/seanprashad/>seanprashad</a></li></ul><nav class=paginav><a class=prev href=https://littlebees.github.io/2021/07/leetcode-138-copy-list-with-random-pointer/><span class=title>« Prev</span><br><span>leetcode-138 - Copy List with Random Pointer</span>
</a><a class=next href=https://littlebees.github.io/2021/07/leetcode-424-longest-repeating-character-replacement/><span class=title>Next »</span><br><span>leetcode-424 - Longest Repeating Character Replacement</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://littlebees.github.io/>記事本</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>